<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="theme-color" content="#000000">
    <title>Sumru ‚ù§Ô∏è</title>
    
    <style>
        /* --- GENEL AYARLAR (ƒ∞PHONE 13 & PWA UYUMLU) --- */
        :root { 
            --ios-blur: blur(25px); 
            --font-stack: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif; 
            --ios-blue: #007AFF; 
            --safe-top: env(safe-area-inset-top);
            --safe-bottom: env(safe-area-inset-bottom);
        }

        body { 
            margin: 0; padding: 0; 
            background-color: #111; 
            display: flex; justify-content: center; align-items: center; 
            height: 100vh; height: 100dvh; 
            font-family: var(--font-stack); 
            overflow: hidden; user-select: none; 
            -webkit-tap-highlight-color: transparent; 
        }
        
        .iphone-frame { 
            width: 375px; height: 812px; 
            background: #000; border-radius: 50px; 
            position: relative; box-shadow: 0 20px 50px rgba(0,0,0,0.5); 
            border: 12px solid #222; overflow: hidden; 
        }

        @media (max-width: 500px) { 
            .iphone-frame { width: 100vw; height: 100dvh; border: none; border-radius: 0; } 
        }
        
        .wallpaper { width: 100%; height: 100%; background: linear-gradient(135deg, #a18cd1 0%, #fbc2eb 50%, #a18cd1 100%); background-size: 200% 200%; position: absolute; top: 0; left: 0; z-index: 0; animation: gradientMove 15s ease infinite alternate; }
        @keyframes gradientMove { 0% { background-position: 0% 50%; } 100% { background-position: 100% 50%; } }
        
        .screen { 
            position: absolute; top: 0; left: 0; width: 100%; height: 100%; 
            transition: transform 0.6s cubic-bezier(0.645, 0.045, 0.355, 1); 
            display: flex; flex-direction: column; align-items: center; 
            color: white; z-index: 10; 
            padding-top: max(40px, var(--safe-top)); 
            padding-bottom: max(20px, var(--safe-bottom)); 
            box-sizing: border-box; 
        }

        /* Kƒ∞Lƒ∞T EKRANI */
        #lock-screen { justify-content: flex-start; background: rgba(0,0,0,0.2); }
        .time-container { animation: slideInDown 0.8s ease-out; text-align: center; margin-top: 20px; }
        .time { font-size: 85px; font-weight: 200; line-height: 1; text-shadow: 0 2px 10px rgba(0,0,0,0.2); margin: 0; }
        .date { font-size: 22px; font-weight: 500; margin-top: 5px; text-shadow: 0 2px 5px rgba(0,0,0,0.2); }
        .notification-container { width: 100%; display: flex; flex-direction: column; gap: 10px; margin-top: 30px; align-items: center; }
        .notification { background: rgba(255, 255, 255, 0.75); backdrop-filter: var(--ios-blur); width: 88%; border-radius: 18px; padding: 12px 15px; color: black; box-shadow: 0 4px 15px rgba(0,0,0,0.1); cursor: pointer; text-align: left; display: flex; gap: 12px; align-items: center; animation: slideInUp 0.6s ease backwards; }
        .notification:nth-child(1) { animation-delay: 0.2s; } .notification:nth-child(2) { animation-delay: 0.4s; } .notification:nth-child(3) { animation-delay: 0.6s; }
        .notif-icon-area { width: 38px; height: 38px; border-radius: 8px; overflow: hidden; flex-shrink: 0; display: flex; justify-content: center; align-items: center; }
        .notif-icon-area img { width: 100%; height: 100%; object-fit: cover; }
        .notif-text-area { flex: 1; display: flex; flex-direction: column; justify-content: center; }
        .notif-header { display: flex; justify-content: space-between; font-size: 11px; text-transform: uppercase; color: #444; margin-bottom: 3px; font-weight: 600; width: 100%; }
        .notif-content h4 { margin: 0; font-size: 15px; font-weight: 700; line-height: 1.2; }
        .notif-content p { margin: 2px 0 0; font-size: 14px; color: #111; line-height: 1.2;}
        .swipe-hint { position: absolute; bottom: max(40px, calc(var(--safe-bottom) + 20px)); font-size: 15px; opacity: 0.8; animation: bounce 2s infinite; animation-delay: 1s; }
        .home-bar { position: absolute; bottom: 8px; width: 140px; height: 5px; background: white; border-radius: 10px; z-index: 100; margin-bottom: var(--safe-bottom); }
        @keyframes slideInUp { from { opacity: 0; transform: translateY(40px); } to { opacity: 1; transform: translateY(0); } }
        @keyframes slideInDown { from { opacity: 0; transform: translateY(-40px); } to { opacity: 1; transform: translateY(0); } }

        /* ANA EKRAN */
        #home-screen { transform: translateY(100%); justify-content: flex-start; }
        .app-grid { display: grid; grid-template-columns: repeat(4, 1fr); gap: 25px 15px; width: 90%; margin-top: 30px; }
        .app-icon { display: flex; flex-direction: column; align-items: center; cursor: pointer; transition: transform 0.1s; }
        .app-icon:active { transform: scale(0.9); }
        .icon-box { width: 62px; height: 62px; border-radius: 16px; display: flex; justify-content: center; align-items: center; font-size: 30px; color: white; margin-bottom: 6px; box-shadow: 0 5px 10px rgba(0,0,0,0.2); }
        .icon-label { font-size: 12px; font-weight: 500; text-shadow: 0 1px 3px rgba(0,0,0,0.5); }
        .dock { position: absolute; bottom: max(30px, calc(var(--safe-bottom) + 15px)); width: 90%; height: 95px; background: rgba(255,255,255,0.25); backdrop-filter: blur(40px); border-radius: 35px; display: flex; justify-content: space-around; align-items: center; }
        
        /* ƒ∞KON RENKLERƒ∞ */
        .photos { background: linear-gradient(180deg, #ff9a9e 0%, #fecfef 100%); } .notes { background: linear-gradient(180deg, #fccb90 0%, #d57eeb 100%); }
        .music { background: linear-gradient(180deg, #fa709a 0%, #fee140 100%); } .maps { background: linear-gradient(180deg, #8fd3f4 0%, #84fab0 100%); }
        .weather { background: linear-gradient(180deg, #54C8FF 0%, #007AFF 100%); }
        .wheel-icon { background: linear-gradient(180deg, #FF512F 0%, #DD2476 100%); }
        .settings-icon { background: linear-gradient(180deg, #8E8E93 0%, #636366 100%); }
        .wallet-icon { background: linear-gradient(180deg, #34C759 0%, #30B34E 100%); }
        .food-icon-bg { background: linear-gradient(135deg, #ff9966 0%, #ff5e62 100%); }
        .fortune-icon-bg { background: linear-gradient(135deg, #8E2DE2 0%, #4A00E0 100%); }
        .quiz-icon-bg { background: linear-gradient(135deg, #FDBB2D 0%, #22C1C3 100%); }

        /* MODAL */
        .app-modal { 
            position: absolute; top: 0; left: 0; width: 100%; height: 100%; 
            background: #f2f2f7; color: #000; z-index: 60; 
            transform: scale(0.95) translateY(20px); opacity: 0; 
            pointer-events: none; transition: all 0.4s cubic-bezier(0.32, 0.72, 0, 1); 
            display: flex; flex-direction: column; border-radius: 40px; overflow: hidden; 
        }
        @media (max-width: 500px) { .app-modal { border-radius: 0; } }
        .app-modal.active { transform: scale(1) translateY(0); opacity: 1; pointer-events: auto; }
        
        .modal-header { 
            padding: max(50px, calc(var(--safe-top) + 10px)) 20px 15px; 
            background: rgba(249,249,249,0.9); backdrop-filter: blur(10px); 
            border-bottom: 1px solid rgba(0,0,0,0.1); 
            display: flex; justify-content: space-between; align-items: center; 
            font-weight: 600; font-size: 17px; position: sticky; top: 0; z-index: 5; flex-shrink: 0; 
        }
        .close-btn { color: var(--ios-blue); border: none; background: none; font-size: 17px; cursor: pointer; font-weight: 400; }
        .modal-content { flex: 1; overflow-y: auto; padding-bottom: max(50px, var(--safe-bottom)); -webkit-overflow-scrolling: touch; }

        /* MESAJLA≈ûMA */
        #app-messages .modal-content { display: flex; flex-direction: column; height: 100%; padding: 0; background: white; overflow: hidden; position: relative; }
        .chat-wrapper { display: flex; flex-direction: column; height: 100%; overflow: hidden; }
        .chat-container { flex: 1; padding: 15px; display: flex; flex-direction: column; gap: 10px; overflow-y: auto; padding-bottom: 20px; }
        .chat-input-area { flex-shrink: 0; padding: 15px; background: #f0f0f0; border-top: 1px solid #ddd; display: flex; align-items: center; gap: 10px; padding-bottom: max(20px, var(--safe-bottom)); }
        .msg-bubble { max-width: 75%; padding: 10px 15px; border-radius: 20px; font-size: 16px; line-height: 1.4; position: relative; word-wrap: break-word; }
        .msg-received { background: #e5e5ea; align-self: flex-start; border-bottom-left-radius: 5px; color: black; }
        .msg-sent { background: var(--ios-blue); color: white; align-self: flex-end; border-bottom-right-radius: 5px; }
        .msg-typing { background: #e5e5ea; align-self: flex-start; border-bottom-left-radius: 5px; padding: 10px 15px; display: none; margin-left: 15px; margin-bottom: 10px; flex-shrink: 0;}
        .dot { height: 8px; width: 8px; background-color: #999; border-radius: 50%; display: inline-block; animation: typing 1.4s infinite ease-in-out both; margin: 0 2px; }
        .dot:nth-child(1) { animation-delay: -0.32s; } .dot:nth-child(2) { animation-delay: -0.16s; }
        @keyframes typing { 0%, 80%, 100% { transform: scale(0); } 40% { transform: scale(1); } }
        .chat-input { flex: 1; border: 1px solid #ccc; border-radius: 20px; padding: 10px 15px; font-size: 16px; outline: none; background: white; }
        .chat-send-btn { color: var(--ios-blue); font-weight: bold; cursor: pointer; font-size: 20px; border: none; background: none; }

        /* UYGULAMA ƒ∞√áERƒ∞KLERƒ∞ */
        .email-list, .call-list { background: white; margin-top: 0; }
        .email-item, .call-item { padding: 15px 20px; border-bottom: 1px solid #eee; display: flex; justify-content: space-between; align-items: center; cursor: pointer; transition: background 0.2s; }
        .email-item:active, .call-item:active { background: #f0f0f0; }
        .note-paper { font-family: 'Marker Felt', 'Comic Sans MS', sans-serif; line-height: 1.6; color: #333; }
        .note-textarea { width: 100%; height: 300px; background: transparent; border: none; outline: none; font-size: 18px; font-family: inherit; resize: none; background-image: linear-gradient(transparent 95%, #e1e1e1 95%); background-size: 100% 30px; margin-top: 10px; }
        .whatsapp-btn { width: 100%; padding: 15px; background: #25D366; color: white; border: none; border-radius: 12px; font-size: 16px; font-weight: bold; margin-top: 20px; cursor: pointer; display: flex; justify-content: center; align-items: center; gap: 10px; }
        .map-container-fixed { width: 100%; height: 350px; border-radius: 15px; overflow: hidden; box-shadow: 0 4px 10px rgba(0,0,0,0.1); position: relative; flex-shrink: 0; }
        .map-frame { width: 100%; height: 100%; border: 0; display: block; }
        #mail-read-view { display: none; background: white; height: 100%; padding: 20px; box-sizing: border-box; }
        .read-subject { font-size: 24px; font-weight: 700; margin-bottom: 10px; line-height: 1.2; }
        .read-meta { display: flex; justify-content: space-between; border-bottom: 1px solid #eee; padding-bottom: 15px; margin-bottom: 20px; color: #555; font-size: 15px; }
        .read-body { font-size: 17px; line-height: 1.5; color: #333; white-space: pre-wrap; }
        .read-actions { margin-top: 30px; border-top: 1px solid #eee; padding-top: 15px; text-align: center; color: var(--ios-blue); font-size: 24px; cursor: pointer; }
        
        /* A≈ûK DURUMU */
        #app-weather .modal-content { background: linear-gradient(to bottom, #4facfe 0%, #00f2fe 100%); color: white; padding: 0; overflow-y: auto; }
        #app-weather .modal-header { background: transparent; border: none; padding-top: max(40px, var(--safe-top)); padding-bottom: 10px; }
        #app-weather .modal-header span { color: #000000; font-weight: 600; font-size: 17px; text-shadow: none; }
        #app-weather .close-btn { color: var(--ios-blue); background: rgba(255,255,255,0.7); padding: 5px 12px; border-radius: 15px; font-size: 14px; font-weight: 600; border: none; }
        .weather-main { text-align: center; padding: 30px 20px; background: rgba(255, 255, 255, 0.15); backdrop-filter: blur(10px); margin: 10px 20px 20px; border-radius: 25px; box-shadow: 0 10px 30px rgba(0,0,0,0.1); border: 1px solid rgba(255,255,255,0.2); }
        .weather-location { font-size: 28px; font-weight: 700; margin-bottom: 5px; text-shadow: 0 2px 5px rgba(0,0,0,0.1); display: flex; align-items: center; justify-content: center; gap: 8px;}
        .weather-icon-large { font-size: 90px; margin: 15px 0; cursor: pointer; user-select: none; transition: transform 2s ease; filter: drop-shadow(0 0 20px rgba(255,255,0,0.6)); }
        .weather-icon-large.growing { transform: scale(1.6) rotate(180deg); filter: drop-shadow(0 0 50px rgba(255,255,0,1)); }
        .weather-temp { font-size: 55px; font-weight: 300; display: flex; justify-content: center; align-items: center; gap: 10px; }
        .weather-desc { font-size: 18px; font-weight: 500; margin-top: 5px; opacity: 0.95; letter-spacing: 0.5px; }
        .forecast-list { background: rgba(255,255,255,0.15); backdrop-filter: blur(10px); margin: 0 20px 40px; border-radius: 20px; padding: 10px; border: 1px solid rgba(255,255,255,0.2); }
        .forecast-item { display: flex; justify-content: space-between; padding: 15px; border-bottom: 1px solid rgba(255,255,255,0.2); font-size: 16px; font-weight: 600; text-shadow: 0 1px 2px rgba(0,0,0,0.1); }
        .forecast-item:last-child { border-bottom: none; }
        #love-explosion-overlay { position: absolute; top:0; left:0; width:100%; height:100%; background: rgba(255, 200, 0, 0.9); display: flex; justify-content: center; align-items: center; z-index: 100; opacity: 0; pointer-events: none; transition: opacity 0.5s; flex-direction: column; }
        #love-explosion-overlay.visible { opacity: 1; pointer-events: auto; }
        #love-explosion-overlay h1 { font-size: 40px; color: #d32f2f; text-align: center; text-shadow: 0 2px 10px rgba(0,0,0,0.2); animation: popIn 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275); }

        /* M√úZƒ∞K */
        #app-music { background: #1c1c1e; color: white; }
        #app-music .modal-header { background: rgba(30,30,30,0.8); color: white; border-bottom: none; }
        .music-bg { position: absolute; top:0; left:0; width:100%; height:100%; background: url('https://images.unsplash.com/photo-1518199266791-5375a83190b7?w=500') no-repeat center center/cover; opacity: 0.3; filter: blur(40px); z-index: 0; }
        .music-ui { position: relative; z-index: 2; display: flex; flex-direction: column; height: 90%; padding: 20px; justify-content: space-evenly; }
        .album-art { width: 280px; height: 280px; border-radius: 15px; background: url('https://images.unsplash.com/photo-1518199266791-5375a83190b7?w=500') center/cover; margin: 0 auto; box-shadow: 0 10px 40px rgba(0,0,0,0.5); }
        .song-info { margin-top: 20px; text-align: left; width: 100%; }
        .song-title { font-size: 24px; font-weight: 700; margin-bottom: 5px; }
        .song-artist { font-size: 18px; color: #ccc; }
        .progress-bar-container { width: 100%; margin-top: 20px; }
        .progress-line { width: 100%; height: 4px; background: rgba(255,255,255,0.2); border-radius: 2px; }
        .progress-fill { width: 30%; height: 100%; background: #fff; border-radius: 2px; }
        .time-info { display: flex; justify-content: space-between; font-size: 12px; color: #aaa; margin-top: 8px; }
        .controls { display: flex; justify-content: space-between; align-items: center; margin-top: 10px; width: 100%; padding: 0 10px; box-sizing: border-box; }
        .ctrl-btn { font-size: 35px; cursor: pointer; color: white; opacity: 0.9; }
        .play-pause-btn { font-size: 55px; }
        
        /* KALP STƒ∞LLERƒ∞ */
        #app-heart { background: radial-gradient(circle at center, #3a000a 0%, #000000 100%); color: white; overflow: hidden; }
        .click-counter { position: absolute; top: 60px; left: 20px; font-size: 20px; font-weight: 600; opacity: 0.8; color: white; background: rgba(255,255,255,0.1); border: 1px solid rgba(255,255,255,0.2); padding: 8px 15px; border-radius: 20px; z-index: 30; pointer-events: none; }
        .heart-wrapper { position: relative; display: flex; flex-direction: column; align-items: center; justify-content: center; height: 100%; z-index: 5; }
        .main-heart { font-size: 140px; cursor: pointer; user-select: none; -webkit-tap-highlight-color: transparent; z-index: 10; padding: 100px; margin: -100px; filter: drop-shadow(0 0 20px rgba(255, 0, 50, 0.4)); transition: transform 0.2s cubic-bezier(0.1, 0.7, 1.0, 0.1), filter 0.2s ease; }
        .main-heart.idle { animation: idleBeat 2.5s infinite ease-in-out; }
        .main-heart.tap { transform: scale(0.9); filter: drop-shadow(0 0 50px rgba(255, 0, 50, 0.9)); }
        .main-heart.growing { transition: transform 3s linear; transform: scale(4); filter: drop-shadow(0 0 100px rgba(255, 0, 50, 1)); }
        #secret-layer, #counter-layer { position: absolute; top:0; left:0; width:100%; height:100%; display: flex; flex-direction: column; justify-content: center; align-items: center; z-index: 20; opacity: 0; pointer-events: none; transition: opacity 0.8s ease; text-align: center; }
        #secret-layer { background: rgba(200, 10, 50, 0.95); } #counter-layer { background: rgba(0, 0, 0, 0.95); }
        #secret-layer.visible, #counter-layer.visible { opacity: 1; pointer-events: auto; }
        .falling-heart { position: absolute; top: -50px; font-size: 20px; opacity: 0.8; pointer-events: none; z-index: 1; animation: fallDown linear forwards; }
        @keyframes idleBeat { 0%, 100% {transform: scale(1);} 50% {transform: scale(1.08);} }
        @keyframes fallDown { to { transform: translateY(900px) rotate(360deg); opacity: 0; } }
        @keyframes bounce { 0%, 100% {transform: translateY(0);} 50% {transform: translateY(-5px);} }
        .photo-gallery { padding: 20px; display: grid; grid-template-columns: repeat(2, 1fr); grid-auto-rows: 180px; gap: 15px; }
        .gallery-photo { width: 100%; height: 100%; object-fit: cover; border-radius: 18px; box-shadow: 0 10px 25px rgba(0,0,0,0.2); transition: all 0.3s ease; cursor: pointer; }
        .photo-tall { grid-row: span 2; height: 100%; } .photo-wide { grid-column: span 2; } 
        .gallery-photo:hover { transform: translateY(-5px) scale(1.02); box-shadow: 0 15px 35px rgba(0,0,0,0.3); }
        .surprise-box { grid-column: span 2; background: linear-gradient(135deg, #ff9a9e 0%, #fecfef 100%); border-radius: 18px; padding: 25px; text-align: center; color: white; font-weight: bold; cursor: pointer; box-shadow: 0 10px 25px rgba(0,0,0,0.2); margin-top: 10px; transition: all 0.4s ease; position: relative; overflow: hidden; }
        .surprise-box:hover { transform: scale(1.02); }
        .surprise-box.revealed { background: linear-gradient(135deg, #ff7eb3 0%, #ff758c 100%); transform: scale(1.05); box-shadow: 0 15px 40px rgba(255, 126, 179, 0.4); }
        .initial-text { transition: opacity 0.3s; }
        .surprise-content { display: none; opacity: 0; margin-top: 15px; font-size: 20px; line-height: 1.4; transform: translateY(20px); transition: all 0.5s ease; }
        .confetti { position: absolute; pointer-events: none; z-index: 70; animation: explode 2s ease-out forwards; }
        @keyframes explode { 0% { opacity: 1; transform: translate(0,0) rotate(0); } 100% { opacity: 0; transform: translate(var(--x), var(--y)) rotate(var(--r)); } }
        #calling-overlay { position: absolute; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.9); backdrop-filter: blur(20px); z-index: 100; display: none; flex-direction: column; align-items: center; padding-top: 80px; box-sizing: border-box; color: white; }
        .caller-img { width: 120px; height: 120px; border-radius: 50%; background: #333; margin-bottom: 20px; object-fit: cover; box-shadow: 0 10px 30px rgba(0,0,0,0.5); }
        .call-status { font-size: 18px; color: #ccc; margin-bottom: 5px; }
        .call-name { font-size: 32px; font-weight: 600; margin-bottom: 50px; }
        .call-actions { width: 80%; display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-top: auto; margin-bottom: 50px; }
        .action-btn { width: 70px; height: 70px; border-radius: 50%; background: rgba(255,255,255,0.15); display: flex; justify-content: center; align-items: center; font-size: 28px; margin: 0 auto; backdrop-filter: blur(10px); }
        .hangup-btn { grid-column: span 2; width: 80px; height: 80px; background: #FF3B30; margin: 30px auto 0; font-size: 35px; }

        /* --- A≈ûK √áARKI STƒ∞LLERƒ∞ --- */
        #app-wheel .modal-content { background: linear-gradient(to top, #dad4ec 0%, #f3e7e9 100%); display: flex; flex-direction: column; align-items: center; justify-content: center; }
        .wheel-title { text-align:center; color:#444; margin-bottom:30px; font-weight: 700; letter-spacing: 0.5px;}
        .wheel-container { position: relative; width: 300px; height: 300px; margin: 20px auto; box-sizing: border-box; }
        .wheel-outer { width: 100%; height: 100%; border-radius: 50%; border: 10px solid white; box-shadow: 0 15px 40px rgba(0,0,0,0.2); overflow: hidden; position: relative; transition: transform 4s cubic-bezier(0.17, 0.67, 0.12, 0.99); box-sizing: border-box; }
        .wheel-inner { width: 100%; height: 100%; position: relative; background: conic-gradient(#FF9A9E 0deg 36deg, #FECFEF 36deg 72deg, #a18cd1 72deg 108deg, #fbc2eb 108deg 144deg, #8fd3f4 144deg 180deg, #84fab0 180deg 216deg, #f6d365 216deg 252deg, #fda085 252deg 288deg, #d4fc79 288deg 324deg, #96e6a1 324deg 360deg); border-radius: 50%; }
        .wheel-labels { position: absolute; top: 0; left: 0; width: 100%; height: 100%; border-radius: 50%; pointer-events: none; }
        .wheel-labels span { position: absolute; top: 50%; left: 50%; font-size: 24px; transform-origin: 0 0; transform: translate(-50%, -50%) rotate(calc((var(--i) * 36deg) + 18deg)) translateY(-115px) rotate(calc((var(--i) * -36deg) - 18deg)); text-shadow: 0 1px 2px rgba(0,0,0,0.2); }
        .wheel-arrow { position: absolute; top: -25px; left: 50%; transform: translateX(-50%); width: 0; height: 0; border-left: 25px solid transparent; border-right: 25px solid transparent; border-top: 50px solid #333; z-index: 10; filter: drop-shadow(0 5px 5px rgba(0,0,0,0.3)); }
        .wheel-center { position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); width: 80px; height: 80px; background: white; border-radius: 50%; box-shadow: 0 5px 20px rgba(0,0,0,0.15); display: flex; justify-content: center; align-items: center; font-size: 36px; z-index: 5; border: 6px solid #fff; box-sizing: border-box; }
        .spin-btn { margin-top: 40px; padding: 15px 60px; background: var(--ios-blue); color: white; font-size: 20px; font-weight: bold; border: none; border-radius: 30px; box-shadow: 0 8px 20px rgba(0,122,255,0.4); cursor: pointer; transition: all 0.2s; }
        .spin-btn:active { transform: scale(0.95); box-shadow: 0 4px 10px rgba(0,122,255,0.3); }
        .spin-btn:disabled { opacity: 0.5; cursor: not-allowed; }
        #wheel-result-overlay { position: absolute; top:0; left:0; width:100%; height:100%; background: rgba(0,0,0,0.5); backdrop-filter: blur(8px); z-index: 20; display: flex; justify-content: center; align-items: center; opacity: 0; pointer-events: none; transition: opacity 0.4s ease; }
        #wheel-result-overlay.visible { opacity: 1; pointer-events: auto; }
        .result-box { background: white; padding: 35px; border-radius: 30px; text-align: center; width: 80%; max-width: 300px; box-shadow: 0 25px 50px rgba(0,0,0,0.4); transform: scale(0.7); opacity: 0; transition: all 0.5s cubic-bezier(0.34, 1.56, 0.64, 1); }
        #wheel-result-overlay.visible .result-box { transform: scale(1); opacity: 1;}
        .result-icon { font-size: 70px; margin-bottom: 15px; display: block; animation: bounce 1.5s infinite; }
        .result-text { margin: 10px 0 25px; color: #333; font-size: 26px; font-weight: 800; line-height: 1.3; }
        .result-close-btn { padding: 12px 30px; background: var(--ios-blue); color: white; border: none; border-radius: 20px; font-size: 18px; font-weight: 600; cursor: pointer; }

        /* A≈ûK AYARLARI (SADE Lƒ∞STE) */
        #app-settings .modal-content { background: #f2f2f7; padding: 20px; }
        .settings-group { background: white; border-radius: 10px; overflow: hidden; margin-bottom: 20px; box-shadow: 0 1px 3px rgba(0,0,0,0.05); }
        .setting-item { display: flex; align-items: center; justify-content: space-between; padding: 12px 15px; border-bottom: 1px solid #f0f0f0; cursor: pointer;}
        .setting-item:last-child { border-bottom: none; }
        .setting-icon { width: 30px; height: 30px; border-radius: 6px; display: flex; justify-content: center; align-items: center; margin-right: 12px; color: white; font-size: 18px; }
        .setting-label { flex: 1; font-size: 16px; color: #000; }
        .setting-value { font-size: 15px; color: #8e8e93; display: flex; align-items: center; gap: 5px; }
        .profile-section { display: flex; align-items: center; background: white; padding: 15px; border-radius: 10px; margin-bottom: 20px; }
        .profile-pic { width: 60px; height: 60px; border-radius: 50%; object-fit: cover; margin-right: 15px; border: 1px solid #eee; }
        .profile-info h3 { margin: 0; font-size: 18px; font-weight: 600; }
        .profile-info p { margin: 3px 0 0; font-size: 14px; color: #888; }
        .toggle-switch { position: relative; width: 50px; height: 30px; -webkit-appearance: none; background: #e9e9ea; outline: none; border-radius: 15px; transition: .3s; cursor: pointer; pointer-events: auto; }
        .toggle-switch:checked { background: #34C759; }
        .toggle-switch::before { content: ''; position: absolute; width: 26px; height: 26px; border-radius: 50%; top: 2px; left: 2px; background: #fff; box-shadow: 0 2px 5px rgba(0,0,0,0.2); transition: .3s; }
        .toggle-switch:checked::before { left: 22px; }

        /* --- C√úZDAN UYGULAMASI STƒ∞LLERƒ∞ --- */
        #app-wallet .modal-content { background: linear-gradient(to bottom, #1e3c72, #2a5298); color: white; padding: 20px; }
        #app-wallet .modal-header { background: rgba(255,255,255,0.15); backdrop-filter: blur(10px); border-bottom: 1px solid rgba(255,255,255,0.1); }
        #app-wallet .modal-header span { color: #000000; font-weight: 700; }
        #app-wallet .close-btn { color: var(--ios-blue); background: white; padding: 6px 14px; border-radius: 15px; font-weight: 600; }
        .wallet-title { font-size: 28px; font-weight: 700; margin-bottom: 20px; letter-spacing: 0.5px; text-shadow: 0 2px 5px rgba(0,0,0,0.3); }
        
        .coupon-card { position: relative; height: 160px; margin-bottom: -70px; border-radius: 20px; padding: 20px; box-sizing: border-box; box-shadow: 0 -5px 25px rgba(0,0,0,0.5); transition: transform 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275); cursor: pointer; display: flex; flex-direction: column; justify-content: space-between; overflow: hidden; border-top: 1px solid rgba(255,255,255,0.2); }
        .coupon-card:hover { transform: translateY(-30px) scale(1.02); z-index: 100; box-shadow: 0 10px 40px rgba(0,0,0,0.6); }
        .coupon-card:last-child { margin-bottom: 30px; }
        
        /* Kart Renkleri */
        .coupon-1 { background: linear-gradient(135deg, #ff9a9e 0%, #fecfef 99%, #fecfef 100%); color: #555; }
        .coupon-2 { background: linear-gradient(135deg, #a18cd1 0%, #fbc2eb 100%); color: white; }
        .coupon-3 { background: linear-gradient(135deg, #8fd3f4 0%, #84fab0 100%); color: #333; }
        .coupon-4 { background: linear-gradient(135deg, #fccb90 0%, #d57eeb 100%); color: #333; }
        .coupon-5 { background: linear-gradient(135deg, #e0c3fc 0%, #8ec5fc 100%); color: #333; }
        .coupon-6 { background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%); color: white; }
        .coupon-7 { background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%); color: white; }
        .coupon-8 { background: linear-gradient(135deg, #43e97b 0%, #38f9d7 100%); color: #333; }
        .coupon-9 { background: linear-gradient(135deg, #ff9a9e 0%, #fecfef 100%); color: #555; }
        .coupon-10 { background: linear-gradient(135deg, #a18cd1 0%, #fbc2eb 100%); color: white; }
        .coupon-11 { background: linear-gradient(135deg, #8fd3f4 0%, #84fab0 100%); color: #333; }
        .coupon-12 { background: linear-gradient(135deg, #fccb90 0%, #d57eeb 100%); color: #333; }

        .coupon-header { display: flex; justify-content: space-between; align-items: flex-start; }
        .coupon-title { font-size: 22px; font-weight: 800; line-height: 1.1; width: 80%; }
        .coupon-icon { font-size: 36px; filter: drop-shadow(0 2px 4px rgba(0,0,0,0.2)); }
        .coupon-footer { display: flex; justify-content: space-between; align-items: center; font-size: 13px; opacity: 0.9; font-weight: 600; text-transform: uppercase; letter-spacing: 1px; }

        /* KUPON DETAYI */
        #coupon-detail-overlay { position: absolute; top:0; left:0; width:100%; height:100%; background: rgba(0,0,0,0.9); backdrop-filter: blur(15px); z-index: 2000; display: flex; justify-content: center; align-items: center; opacity: 0; pointer-events: none; transition: opacity 0.3s ease; }
        #coupon-detail-overlay.visible { opacity: 1; pointer-events: auto; }
        .coupon-detail-card { width: 85%; background: white; border-radius: 25px; overflow: hidden; box-shadow: 0 30px 60px rgba(0,0,0,0.6); text-align: center; transform: scale(0.8); transition: transform 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275); }
        #coupon-detail-overlay.visible .coupon-detail-card { transform: scale(1); }
        .detail-header { height: 120px; display: flex; justify-content: center; align-items: center; font-size: 60px; color: white; position: relative; overflow: hidden;}
        .detail-header::after { content: ''; position: absolute; bottom: -20px; left: -10%; width: 120%; height: 40px; background: white; border-radius: 50%; }
        .detail-body { padding: 10px 25px 30px; color: #333; }
        .detail-title { font-size: 26px; font-weight: 800; margin-bottom: 10px; color: #222; }
        .detail-desc { font-size: 17px; color: #555; line-height: 1.6; margin-bottom: 30px; font-weight: 400;}
        .use-btn { width: 100%; padding: 16px; background: #34C759; color: white; font-size: 18px; font-weight: bold; border: none; border-radius: 15px; cursor: pointer; box-shadow: 0 5px 15px rgba(52, 199, 89, 0.4); transition: all 0.2s; }
        .use-btn:active { transform: scale(0.95); }
        .close-detail-btn { margin-top: 20px; background: none; border: none; color: #999; font-size: 15px; cursor: pointer; font-weight: 500; }

        /* A≈ûK MUTFAƒûI (ƒ∞PHONE 13 UYUMLU SABƒ∞T SEPET) */
        #app-food .modal-content { background: #f5f5f5; padding: 0; position: relative; overflow-y: auto; height: 100%; }
        #app-food .modal-header { background: white; border-bottom: 1px solid #eee; }
        
        .food-category { padding: 20px 20px 10px; font-size: 18px; font-weight: 800; color: #333; }
        .food-list { padding-bottom: 120px; /* Sepet barƒ± ve g√ºvenli alan i√ßin ekstra bo≈üluk */ }
        
        .food-item { background: white; margin: 10px 20px; padding: 15px; border-radius: 20px; display: flex; align-items: center; justify-content: space-between; box-shadow: 0 5px 15px rgba(0,0,0,0.05); transition: transform 0.2s; }
        .food-item:active { transform: scale(0.98); }
        
        .f-img { font-size: 35px; width: 45px; text-align: center; margin-right: 15px; }
        .f-info { flex: 1; }
        .f-name { font-weight: 700; font-size: 16px; color: #000; display: block; margin-bottom: 4px; }
        .f-desc { font-size: 12px; color: #888; display: block; margin-bottom: 4px; line-height: 1.2; }
        .f-price { font-size: 11px; color: #ff5e62; font-weight: 700; background: rgba(255, 94, 98, 0.1); padding: 4px 8px; border-radius: 10px; display: inline-block; text-transform: uppercase; letter-spacing: 0.5px; }
        
        /* Simetrik Butonlar */
        .f-actions { display: flex; align-items: center; justify-content: center; gap: 8px; width: 90px; }
        .btn-qty { width: 30px; height: 30px; border-radius: 50%; border: none; font-size: 18px; font-weight: 600; display: flex; justify-content: center; align-items: center; cursor: pointer; transition: all 0.2s; padding: 0; line-height: 1; }
        .btn-plus { background: #ff5e62; color: white; box-shadow: 0 4px 10px rgba(255, 94, 98, 0.3); }
        .btn-minus { background: white; color: #ff5e62; border: 2px solid #ff5e62; display: none; } 
        .qty-num { font-weight: 700; font-size: 16px; min-width: 20px; text-align: center; display: none; color: #333; }

        .has-item .btn-minus, .has-item .qty-num { display: flex; display: block; }
        
        /* ƒ∞PHONE 13 ƒ∞√áƒ∞N SEPET Hƒ∞ZALAMA */
        .cart-bar { 
            position: absolute; 
            bottom: max(20px, calc(var(--safe-bottom) + 10px)); /* Home barƒ±n √ºzerine √ßƒ±kar */
            left: 5%; width: 90%; 
            background: #222; color: white; 
            padding: 15px 20px; border-radius: 25px; 
            display: flex; justify-content: space-between; align-items: center; 
            box-shadow: 0 10px 40px rgba(0,0,0,0.4); 
            transform: translateY(200%); 
            transition: transform 0.4s cubic-bezier(0.34, 1.56, 0.64, 1); 
            z-index: 100; box-sizing: border-box; cursor: pointer; 
        }
        .cart-bar.active { transform: translateY(0); }
        .cart-total { font-weight: 700; display: flex; flex-direction: column; }
        .cart-btn-txt { font-weight: 700; color: #ff5e62; background: white; padding: 10px 20px; border-radius: 20px; font-size: 14px; }

        /* --- FALCI UYGULAMASI --- */
        #app-fortune { background: radial-gradient(circle at center, #2b1055 0%, #7597de 100%); }
        #app-fortune .modal-content { background: transparent; display: flex; flex-direction: column; align-items: center; justify-content: center; color: white; padding: 20px; text-align: center; }
        #app-fortune .modal-header { background: transparent; border: none; color: white; }
        #app-fortune .close-btn { color: white; background: rgba(255,255,255,0.2); }
        #app-fortune .modal-header span { color: white; text-shadow: 0 2px 4px rgba(0,0,0,0.3); font-size: 19px; }

        .crystal-ball-container { position: relative; width: 250px; height: 250px; margin: 20px auto; display: flex; justify-content: center; align-items: center; }
        .crystal-ball { width: 200px; height: 200px; border-radius: 50%; background: radial-gradient(circle at 30% 30%, rgba(255,255,255,0.8), rgba(255,255,255,0.1) 20%, rgba(100,0,255,0.4) 60%, rgba(50,0,100,0.9) 100%); box-shadow: 0 0 50px rgba(138, 43, 226, 0.6), inset 0 0 20px rgba(255,255,255,0.2); position: relative; z-index: 5; cursor: pointer; transition: transform 0.2s; }
        .crystal-ball.shaking { animation: shakeBall 0.5s cubic-bezier(.36,.07,.19,.97) both infinite; box-shadow: 0 0 80px rgba(138, 43, 226, 1), inset 0 0 40px rgba(255,255,255,0.5); }
        @keyframes shakeBall { 10%, 90% { transform: translate3d(-2px, 0, 0) rotate(-2deg); } 20%, 80% { transform: translate3d(4px, 0, 0) rotate(2deg); } 30%, 50%, 70% { transform: translate3d(-6px, 0, 0) rotate(-4deg); } 40%, 60% { transform: translate3d(6px, 0, 0) rotate(4deg); } }
        .crystal-stand { position: absolute; bottom: 0; width: 120px; height: 40px; background: linear-gradient(to bottom, #444, #111); border-radius: 50%; z-index: 1; transform: translateY(110px); box-shadow: 0 10px 20px rgba(0,0,0,0.6); }
        .fortune-text { font-size: 24px; font-weight: 700; min-height: 80px; margin-top: 50px; text-shadow: 0 2px 10px rgba(0,0,0,0.8); opacity: 0; transition: opacity 1s; max-width: 90%; position: relative; z-index: 10; }
        .fortune-text.visible { opacity: 1; }
        .fortune-hint { font-size: 14px; opacity: 0.7; margin-top: 20px; animation: pulse 2s infinite; }
        @keyframes pulse { 0%, 100% { opacity: 0.5; } 50% { opacity: 1; } }

        /* --- QUIZ UYGULAMASI (G√úNCELLENDƒ∞) --- */
        /* HATA √á√ñZ√úM√ú: Gradient background'u ana kapsayƒ±cƒ±ya verdik, header ve content'i ≈üeffaf yaptƒ±k */
        #app-quiz { background: linear-gradient(to bottom, #2c3e50, #4ca1af); }
        #app-quiz .modal-content { background: transparent; color: white; display: flex; flex-direction: column; align-items: center; padding: 30px 20px; }
        #app-quiz .modal-header { background: transparent; border: none; color: white; }
        #app-quiz .close-btn { color: white; background: rgba(255,255,255,0.2); }
        #app-quiz .modal-header span { color: white; text-shadow: 0 2px 4px rgba(0,0,0,0.3); font-size: 19px; }

        .quiz-container { width: 100%; max-width: 400px; text-align: center; }
        .quiz-question { font-size: 26px; font-weight: 700; margin-bottom: 40px; min-height: 80px; display: flex; align-items: center; justify-content: center; text-shadow: 0 2px 5px rgba(0,0,0,0.3); }
        .quiz-options { display: flex; flex-direction: column; gap: 15px; width: 100%; }
        .quiz-btn { 
            padding: 18px; border: none; border-radius: 15px; 
            background: rgba(255,255,255,0.95); color: #333; 
            font-size: 18px; font-weight: 600; cursor: pointer; 
            transition: transform 0.1s, background 0.3s; 
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
        }
        .quiz-btn:active { transform: scale(0.98); }
        .quiz-btn.correct { background: #2ecc71; color: white; animation: pop 0.4s; }
        .quiz-btn.wrong { background: #e74c3c; color: white; animation: shake 0.4s; }
        
        #quiz-result { display: none; flex-direction: column; align-items: center; justify-content: center; height: 80%; }
        .score-circle { width: 150px; height: 150px; border-radius: 50%; border: 10px solid rgba(255,255,255,0.3); display: flex; justify-content: center; align-items: center; font-size: 40px; font-weight: bold; margin-bottom: 20px; background: rgba(255,255,255,0.1); box-shadow: 0 10px 30px rgba(0,0,0,0.2); }
        
        @keyframes shake { 0%, 100% {transform: translateX(0);} 25% {transform: translateX(-10px);} 75% {transform: translateX(10px);} }
        @keyframes pop { 0% {transform: scale(1);} 50% {transform: scale(1.1);} 100% {transform: scale(1);} }

    </style>
</head>
<body>

    <audio id="bg-music" loop><source src="cakal.mp3" type="audio/mpeg"></audio>

    <div class="iphone-frame">
        <div class="wallpaper"></div>

        <div id="lock-screen" class="screen">
            <div class="time-container"><div style="font-size:20px;">üîí</div><div class="time" id="clock">--:--</div><div class="date" id="date">...</div></div>
            <div class="notification-container">
                <div class="notification" onclick="unlockPhone()"><div class="notif-icon-area" style="background:#4CD964;"><span style="font-size:20px; color:white;">üí¨</span></div><div class="notif-text-area"><div class="notif-header"><span>MESAJLAR</span><span>≈ûƒ∞MDƒ∞</span></div><div class="notif-content"><h4>Sumru ‚ù§Ô∏è</h4><p>Sana √∂zel bir s√ºrprizim var!...</p></div></div></div>
                <div class="notification" onclick="unlockPhone()"><div class="notif-icon-area"><img src="https://upload.wikimedia.org/wikipedia/commons/thumb/a/a5/Instagram_icon.png/600px-Instagram_icon.png" alt="IG"></div><div class="notif-text-area"><div class="notif-header"><span>INSTAGRAM</span><span>2dk √∂nce</span></div><div class="notif-content"><h4>Kocan ‚ù§Ô∏è</h4><p>kocan reels g√∂nderdi ‚ñ∂Ô∏è</p></div></div></div>
                <div class="notification" onclick="unlockPhone()"><div class="notif-icon-area" style="background: linear-gradient(135deg, #fa709a 0%, #fee140 100%);"><span style="font-size:20px;">üéµ</span></div><div class="notif-text-area"><div class="notif-header"><span>M√úZƒ∞K</span><span>≈ûƒ∞MDƒ∞</span></div><div class="notif-content"><h4>Hatƒ±rlatma</h4><p>ƒ∞lk √∂nce m√ºziƒüini a√ßmayƒ± unutma üòâ</p></div></div></div>
            </div>
            <div class="swipe-hint" onclick="unlockPhone()">Kilidi A√ßmak ƒ∞√ßin Yukarƒ± Kaydƒ±r</div><div class="home-bar"></div>
        </div>

        <div id="home-screen" class="screen">
            <div class="app-grid">
                <div class="app-icon" onclick="openApp('photos')"><div class="icon-box photos">üì∏</div><span class="icon-label">Anƒ±larƒ±mƒ±z</span></div>
                <div class="app-icon" onclick="openApp('notes')"><div class="icon-box notes">üìù</div><span class="icon-label">Mektup</span></div>
                <div class="app-icon" onclick="openApp('music')"><div class="icon-box music">üéµ</div><span class="icon-label">≈ûarkƒ±mƒ±z</span></div>
                <div class="app-icon" onclick="openApp('maps')"><div class="icon-box maps">üìç</div><span class="icon-label">Konum</span></div>
                <div class="app-icon" onclick="openApp('weather')"><div class="icon-box weather">‚òÄÔ∏è</div><span class="icon-label">A≈ük Durumu</span></div>
                <div class="app-icon" onclick="openApp('wheel')"><div class="icon-box wheel-icon">üé°</div><span class="icon-label">A≈ük √áarkƒ±</span></div>
                <div class="app-icon" onclick="openApp('settings')"><div class="icon-box settings-icon">‚öôÔ∏è</div><span class="icon-label">Ayarlar</span></div>
                <div class="app-icon" onclick="openApp('wallet')"><div class="icon-box wallet-icon">üéüÔ∏è</div><span class="icon-label">C√ºzdan</span></div>
                <div class="app-icon" onclick="openApp('food')"><div class="icon-box food-icon-bg">üçî</div><span class="icon-label">A≈ük Mutfaƒüƒ±</span></div>
                <div class="app-icon" onclick="openApp('fortune')"><div class="icon-box fortune-icon-bg">üîÆ</div><span class="icon-label">Falcƒ±</span></div>
                <div class="app-icon" onclick="openApp('quiz')"><div class="icon-box quiz-icon-bg">üß†</div><span class="icon-label">Beni Tanƒ±</span></div>
            </div>
            <div class="dock">
                <div class="app-icon" onclick="openApp('phone')"><div class="icon-box" style="background:#4CD964; font-size:24px;">üìû</div></div>
                <div class="app-icon" onclick="openApp('mail')"><div class="icon-box" style="background:#5AC8FA; font-size:24px;">üìß</div></div>
                <div class="app-icon" onclick="openApp('messages')"><div class="icon-box" style="background:#fff; color:black; font-size:24px;">üí¨</div></div>
                <div class="app-icon" onclick="openApp('heart')"><div class="icon-box" style="background:#FF2D55; font-size:24px;">‚ù§Ô∏è</div></div>
            </div>
            <div class="home-bar"></div>
        </div>

        <div id="app-notes" class="app-modal">
            <div class="modal-header"><button class="close-btn" onclick="closeApp('notes')">Kapat</button><span id="note-title">Mektup</span><button class="close-btn" onclick="toggleNoteMode()">‚úèÔ∏è</button></div>
            <div class="modal-content" style="padding:20px;">
                <div id="note-read-mode" class="note-paper" style="background:#fffdf2; padding:20px; border-radius:10px; box-shadow:0 2px 5px rgba(0,0,0,0.1);"><p><b>Canƒ±m Sevgilim Sumru,</b></p><p>Seninle ge√ßen her an, hayatƒ±mƒ±n en g√ºzel g√ºncellemesi gibi... üòä</p><p>Atapark'ta ba≈ülayan bu hikaye, ≈üimdi telefonunun ekranƒ±nda ama en √∂nemlisi kalbimin tam merkezinde.</p><p>Yukarƒ±daki kaleme basƒ±p sen de bana cevap yazabilirsin.</p><p align="right"><b>- Kocan</b></p></div>
                <div id="note-write-mode" style="display:none; height:100%;"><div class="note-paper" style="background:#fffdf2; padding:20px; border-radius:10px; height:100%;"><p style="color:#888; font-size:14px;">Kocana Cevap Yaz:</p><textarea id="reply-text" class="note-textarea" placeholder="Buraya yazabilirsin sevgilim..."></textarea><button class="whatsapp-btn" onclick="sendWhatsapp()"><span>WhatsApp ile G√∂nder</span><svg width="20" height="20" viewBox="0 0 24 24" fill="white"><path d="M2.01 21L23 12 2.01 3 2 10l15 2-15 2z"/></svg></button></div></div>
            </div>
        </div>

        <div id="app-weather" class="app-modal">
            <div class="modal-header"><span>A≈ük Durumu</span><button class="close-btn" onclick="closeApp('weather')">Kapat</button></div>
            <div class="modal-content">
                <div class="weather-main">
                    <div class="weather-location">üìç Kalbim</div>
                    <div class="weather-icon-large" id="sun-icon">‚òÄÔ∏è</div>
                    <div class="weather-temp">100%<span style="font-size:30px">‚ù§Ô∏è</span></div>
                    <div class="weather-desc">G√ºne≈üli ve A≈ük Dolu</div>
                </div>
                <div class="forecast-list">
                    <div class="forecast-item"><span>Bug√ºn</span><span>üíã Saƒüanak √ñp√ºc√ºk</span></div>
                    <div class="forecast-item"><span>Yarƒ±n</span><span>üî• Sƒ±cak Sarƒ±lmalar</span></div>
                    <div class="forecast-item"><span>√áar≈üamba</span><span>üíñ Kalp √áarpƒ±ntƒ±sƒ±</span></div>
                    <div class="forecast-item"><span>Per≈üembe</span><span>ü•∞ Sonsuz Mutluluk</span></div>
                    <div class="forecast-item"><span>Cuma</span><span>üíç Gelecek Hayalleri</span></div>
                    <div class="forecast-item"><span>Cumartesi</span><span>üçø Film Gecesi</span></div>
                    <div class="forecast-item"><span>Pazar</span><span>üèñÔ∏è Birlikte Tatil</span></div>
                    <div class="forecast-item"><span>Haftaya</span><span>üíå S√ºrprizler</span></div>
                    <div class="forecast-item"><span>Sonsuza Dek</span><span>üë´ El Ele</span></div>
                </div>
                <div id="love-explosion-overlay"><h1>A≈ûK PATLAMASI! üí•‚ù§Ô∏è</h1></div>
            </div>
        </div>

        <div id="app-wheel" class="app-modal">
            <div class="modal-header"><span>A≈ük √áarkƒ±</span><button class="close-btn" onclick="closeApp('wheel')">Kapat</button></div>
            <div class="modal-content">
                <h2 class="wheel-title">Bug√ºn Ne Yapalƒ±m?</h2>
                <div class="wheel-container"><div class="wheel-arrow"></div><div class="wheel-outer" id="wheel"><div class="wheel-inner"><div class="wheel-labels"><span style="--i:0;">üíÜ‚Äç‚ôÇÔ∏è</span><span style="--i:1;">üìú</span><span style="--i:2;">üé¨</span><span style="--i:3;">üßº</span><span style="--i:4;">‚òï</span><span style="--i:5;">üíã</span><span style="--i:6;">üçù</span><span style="--i:7;">ü´Ç</span><span style="--i:8;">ü¶∂</span><span style="--i:9;">‚ù§Ô∏è</span></div></div></div><div class="wheel-center">‚ù§Ô∏è</div></div>
                <div style="text-align:center;"><button class="spin-btn" id="spin-btn" onclick="spinWheel()">√áEVƒ∞R</button></div>
                <div id="wheel-result-overlay"><div class="result-box"><span class="result-icon" id="res-icon">üéâ</span><h2 class="result-text" id="res-text">Sonu√ß</h2><button class="result-close-btn" id="res-btn" onclick="closeResultPopup()">Tamam A≈üko üíñ</button></div></div>
            </div>
        </div>

        <div id="app-settings" class="app-modal">
            <div class="modal-header"><span>Ayarlar</span><button class="close-btn" onclick="closeApp('settings')">Bitti</button></div>
            <div class="modal-content">
                <div class="profile-section">
                    <img src="foto1.png" class="profile-pic">
                    <div class="profile-info"><h3>Sumru & Kocan</h3><p>A≈ük ID, iCloud ve Bizim Bulut</p></div>
                </div>
                <div class="settings-group">
                    <div class="setting-item" onclick="toggleAirplaneMode()"><div class="setting-icon" style="background: #F09A37;">‚úàÔ∏è</div><div class="setting-label">U√ßak Modu</div><div class="setting-value"><input type="checkbox" class="toggle-switch" id="airplane-switch"></div></div>
                    <div class="setting-item" onclick="alert('üì∂ Sinyal G√ºc√º: %100 (Kalbine tam √ßekiyor)')"><div class="setting-icon" style="background: #007AFF;">üì∂</div><div class="setting-label">Wi-Fi</div><div class="setting-value">Kalbine Tam √áekiyor</div></div>
                    <div class="setting-item" onclick="alert('üéß Kocan Baƒülƒ±')"><div class="setting-icon" style="background: #007AFF;">Bluetooth</div><div class="setting-label">Bluetooth</div><div class="setting-value">Sadece Kocanla E≈üle≈üti</div></div>
                    <div class="setting-item" onclick="alert('üî• Dikkat! Yanabilirsin...')"><div class="setting-icon" style="background: #34C759;">üåê</div><div class="setting-label">Ki≈üisel Eri≈üim Noktasƒ±</div><div class="setting-value">Sƒ±caklƒ±k: √áok Y√ºksek</div></div>
                    <div class="setting-item" onclick="alert('üîê Baƒülantƒ±mƒ±z ≈üifreli ve koparƒ±lamaz!')"><div class="setting-icon" style="background: #007AFF;">üõ°Ô∏è</div><div class="setting-label">VPN</div><div class="setting-value">Virtual Passion Network</div></div>
                </div>
                <div class="settings-group">
                    <div class="setting-item" onclick="alert('üîî Senden gelen her ≈üey anƒ±nda ekranda!')"><div class="setting-icon" style="background: #FF3B30;">üîî</div><div class="setting-label">Bildirimler</div><div class="setting-value">Senden Gelince Hep A√ßƒ±k</div></div>
                    <div class="setting-item"><div class="setting-icon" style="background: #FF2D55;">üîä</div><div class="setting-label">Ses ve Dokunu≈ü</div><div class="setting-value">Kalp Atƒ±≈üƒ±na Ayarlƒ±</div></div>
                    <div class="setting-item" onclick="alert('üåô ≈ûu an sadece sen ve ben varƒ±z.')"><div class="setting-icon" style="background: #5856D6;">üåô</div><div class="setting-label">Odak</div><div class="setting-value">Sadece Sen</div></div>
                </div>
                <div class="settings-group">
                    <div class="setting-item" onclick="alert('‚ú® Senin ƒ±≈üƒ±ƒüƒ±n bana yetiyor sevgilim, ekranƒ± kƒ±smaya gerek yok.')"><div class="setting-icon" style="background: #007AFF;">üí°</div><div class="setting-label">Ekran ve Parlaklƒ±k</div><div class="setting-value">I≈üƒ±ƒüƒ±n Yetiyor</div></div>
                    <div class="setting-item"><div class="setting-icon" style="background: #34C759;">üîã</div><div class="setting-label">Pil</div><div class="setting-value">Seninle %100</div></div>
                </div>
            </div>
        </div>

        <div id="app-wallet" class="app-modal">
            <div class="modal-header"><span>C√ºzdan</span><button class="close-btn" onclick="closeApp('wallet')">Bitti</button></div>
            <div class="modal-content">
                <div class="wallet-title">Kuponlarƒ±m</div>
                <div class="coupon-card coupon-1" onclick="openCoupon(0)"><div class="coupon-header"><div><div class="coupon-title">Masaj Keyfi</div><small>30 Dakika Kesintisiz</small></div><div class="coupon-icon">üíÜ‚Äç‚ôÄÔ∏è</div></div><div class="coupon-footer"><span>Kocan A.≈û.</span><span>SKT: SONSUZ</span></div></div>
                <div class="coupon-card coupon-2" onclick="openCoupon(1)"><div class="coupon-header"><div><div class="coupon-title">Haklƒ±sƒ±n Kartƒ±</div><small>Tartƒ±≈ümada 1 Kere Haklƒ± √áƒ±k</small></div><div class="coupon-icon">‚úÖ</div></div><div class="coupon-footer"><span>Tartƒ±≈üma Bakanlƒ±ƒüƒ±</span><span>TEK KULLANIMLIK</span></div></div>
                <div class="coupon-card coupon-3" onclick="openCoupon(2)"><div class="coupon-header"><div><div class="coupon-title">Yemek Ismarla</div><div style="font-size:12px;">ƒ∞stediƒüin Yerde, ƒ∞stediƒüin Zaman</div></div><div class="coupon-icon">üçΩÔ∏è</div></div><div class="coupon-footer"><span>Kocan Mutfaƒüƒ±</span><span>HER ZAMAN</span></div></div>
                <div class="coupon-card coupon-4" onclick="openCoupon(3)"><div class="coupon-header"><div><div class="coupon-title">Sƒ±nƒ±rsƒ±z √ñp√ºc√ºk</div><small>Yanak, Dudak Fark Etmez</small></div><div class="coupon-icon">üíã</div></div><div class="coupon-footer"><span>Sevgi Bankasƒ±</span><span>Lƒ∞Mƒ∞TSƒ∞Z</span></div></div>
                <div class="coupon-card coupon-5" onclick="openCoupon(4)"><div class="coupon-header"><div><div class="coupon-title">Yatakta Kahvaltƒ±</div><small>Pazar Sabahƒ± √ñzel Servis</small></div><div class="coupon-icon">ü•û</div></div><div class="coupon-footer"><span>Kocan Cafe</span><span>HAFTA SONU</span></div></div>
                <div class="coupon-card coupon-6" onclick="openCoupon(5)"><div class="coupon-header"><div><div class="coupon-title">Sinema Gecesi</div><small>Film ve Mƒ±sƒ±r Benden!</small></div><div class="coupon-icon">üçø</div></div><div class="coupon-footer"><span>Kocan Sinemalarƒ±</span><span>HER AK≈ûAM</span></div></div>
                <div class="coupon-card coupon-7" onclick="openCoupon(6)"><div class="coupon-header"><div><div class="coupon-title">Teknoloji Diyeti</div><small>Sadece Biz Olacaƒüƒ±z (1 Saat)</small></div><div class="coupon-icon">üìµ</div></div><div class="coupon-footer"><span>Detoks Merkezi</span><span>ƒ∞HTƒ∞YA√á HALƒ∞NDE</span></div></div>
                <div class="coupon-card coupon-8" onclick="openCoupon(7)"><div class="coupon-header"><div><div class="coupon-title">S√ºrpriz Randevu</div><small>Plan Benden, Hazƒ±rlanmak Senden</small></div><div class="coupon-icon">ü•Ç</div></div><div class="coupon-footer"><span>Kocan Events</span><span>√ñZEL G√úN</span></div></div>
                
                <div class="coupon-card coupon-9" onclick="openCoupon(8)"><div class="coupon-header"><div><div class="coupon-title">Alƒ±≈üveri≈ü G√ºn√º</div><small>Bug√ºn kartlar benden!</small></div><div class="coupon-icon">üõçÔ∏è</div></div><div class="coupon-footer"><span>Kocan Bank</span><span>LIMITSIZ</span></div></div>
                <div class="coupon-card coupon-10" onclick="openCoupon(9)"><div class="coupon-header"><div><div class="coupon-title">Sessizlik Hakkƒ±</div><small>Hi√ß konu≈ümadan sarƒ±lma hakkƒ±</small></div><div class="coupon-icon">ü§´</div></div><div class="coupon-footer"><span>Huzur A.≈û.</span><span>HER AN</span></div></div>
                <div class="coupon-card coupon-11" onclick="openCoupon(10)"><div class="coupon-header"><div><div class="coupon-title">Oyun Gecesi</div><small>Beraber oyun oynuyoruz!</small></div><div class="coupon-icon">üéÆ</div></div><div class="coupon-footer"><span>Gamer Love</span><span>EƒûLENCE</span></div></div>
                <div class="coupon-card coupon-12" onclick="openCoupon(11)"><div class="coupon-header"><div><div class="coupon-title">√ñzel ≈ûof√∂rl√ºk</div><small>Nereye dersen oraya s√ºr√ºyorum</small></div><div class="coupon-icon">üöó</div></div><div class="coupon-footer"><span>Kocan Taksi</span><span>7/24</span></div></div>

                
                <div id="coupon-detail-overlay">
                    <div class="coupon-detail-card">
                        <div class="detail-header" id="detail-bg">üéüÔ∏è</div>
                        <div class="detail-body">
                            <div class="detail-title" id="detail-title">Ba≈ülƒ±k</div>
                            <div class="detail-desc" id="detail-desc">A√ßƒ±klama</div>
                            <button class="use-btn" onclick="useCoupon()">≈ûimdi Kullan</button>
                            <button class="close-detail-btn" onclick="closeCoupon()">Vazge√ß</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div id="app-food" class="app-modal">
            <div class="modal-header"><span>A≈ük Mutfaƒüƒ±</span><button class="close-btn" onclick="closeApp('food')">Kapat</button></div>
            <div class="modal-content">
                <div class="food-list">
                    <div class="food-category">Ger√ßek Lezzetler üòã</div>
                    <div class="food-item" id="item-7"><div class="f-img">üçã</div><div class="f-info"><span class="f-name">√áiƒük√∂fte D√ºr√ºm</span><span class="f-desc">Bol limonlu, acƒ±lƒ±, nar ek≈üili.</span><span class="f-price">Ayran Senden</span></div><div class="f-actions"><button class="btn-qty btn-minus" onclick="updateFood(7, -1)">-</button><span class="qty-num" id="qty-7">0</span><button class="btn-qty btn-plus" onclick="updateFood(7, 1)">+</button></div></div>
                    <div class="food-item" id="item-8"><div class="f-img">üåØ</div><div class="f-info"><span class="f-name">Hatay D√∂ner</span><span class="f-desc">Bol soslu tavuk d√∂ner.</span><span class="f-price">Bir Isƒ±rƒ±k</span></div><div class="f-actions"><button class="btn-qty btn-minus" onclick="updateFood(8, -1)">-</button><span class="qty-num" id="qty-8">0</span><button class="btn-qty btn-plus" onclick="updateFood(8, 1)">+</button></div></div>
                    <div class="food-item" id="item-9"><div class="f-img">ü•ô</div><div class="f-info"><span class="f-name">√áƒ±tƒ±r Lahmacun</span><span class="f-desc">Sumaklƒ± soƒüan ve maydanoz ile.</span><span class="f-price">Salata Benden</span></div><div class="f-actions"><button class="btn-qty btn-minus" onclick="updateFood(9, -1)">-</button><span class="qty-num" id="qty-9">0</span><button class="btn-qty btn-plus" onclick="updateFood(9, 1)">+</button></div></div>
                     <div class="food-category">Tatlƒ± Krizleri üç∞</div>
                    <div class="food-item" id="item-10"><div class="f-img">üçÆ</div><div class="f-info"><span class="f-name">Sƒ±cak Sufle</span><span class="f-desc">Akƒ±≈ükan √ßikolatalƒ±...</span><span class="f-price">Kahve Yanƒ±na</span></div><div class="f-actions"><button class="btn-qty btn-minus" onclick="updateFood(10, -1)">-</button><span class="qty-num" id="qty-10">0</span><button class="btn-qty btn-plus" onclick="updateFood(10, 1)">+</button></div></div>
                    <div class="food-category">Kocan Spesiyalleri ‚ù§Ô∏è</div>
                    <div class="food-item" id="item-1"><div class="f-img">üçî</div><div class="f-info"><span class="f-name">Kocan Burger</span><span class="f-desc">√ñzel soslu, bol sevgi i√ßeren ev yapƒ±mƒ± burger.</span><span class="f-price">1 √ñp√ºc√ºk</span></div><div class="f-actions"><button class="btn-qty btn-minus" onclick="updateFood(1, -1)">-</button><span class="qty-num" id="qty-1">0</span><button class="btn-qty btn-plus" onclick="updateFood(1, 1)">+</button></div></div>
                    <div class="food-item" id="item-2"><div class="f-img">üçù</div><div class="f-info"><span class="f-name">Romantik Makarna</span><span class="f-desc">ƒ∞talyan usul√º, mum ƒ±≈üƒ±ƒüƒ± e≈üliƒüinde servis.</span><span class="f-price">Sƒ±msƒ±kƒ± Sarƒ±lma</span></div><div class="f-actions"><button class="btn-qty btn-minus" onclick="updateFood(2, -1)">-</button><span class="qty-num" id="qty-2">0</span><button class="btn-qty btn-plus" onclick="updateFood(2, 1)">+</button></div></div>
                    <div class="food-item" id="item-3"><div class="f-img">ü•û</div><div class="f-info"><span class="f-name">A≈ük Krebi</span><span class="f-desc">√áikolatalƒ±, meyveli pazar kahvaltƒ±sƒ± efsanesi.</span><span class="f-price">G√ºl√ºmseme</span></div><div class="f-actions"><button class="btn-qty btn-minus" onclick="updateFood(3, -1)">-</button><span class="qty-num" id="qty-3">0</span><button class="btn-qty btn-plus" onclick="updateFood(3, 1)">+</button></div></div>
                    <div class="food-item" id="item-4"><div class="f-img">‚òï</div><div class="f-info"><span class="f-name">Kocan Kahvesi</span><span class="f-desc">Yorgunluk alƒ±r, muhabbet a√ßar.</span><span class="f-price">5 Dk Masaj</span></div><div class="f-actions"><button class="btn-qty btn-minus" onclick="updateFood(4, -1)">-</button><span class="qty-num" id="qty-4">0</span><button class="btn-qty btn-plus" onclick="updateFood(4, 1)">+</button></div></div>
                    <div class="food-item" id="item-6"><div class="f-img">üç´</div><div class="f-info"><span class="f-name">√áikolata Krizi</span><span class="f-desc">Acil durumlar i√ßin √∂zel stoktan.</span><span class="f-price">1 √ñp√ºc√ºk</span></div><div class="f-actions"><button class="btn-qty btn-minus" onclick="updateFood(6, -1)">-</button><span class="qty-num" id="qty-6">0</span><button class="btn-qty btn-plus" onclick="updateFood(6, 1)">+</button></div></div>
                </div>
            </div>
            <div class="cart-bar" id="cart-bar" onclick="sendFoodOrder()">
                <div class="cart-total"><span style="font-size:12px; opacity:0.7;">Toplam Tutar</span><span id="cart-total-txt">0 √ñp√ºc√ºk</span></div>
                <div class="cart-btn-txt">Sepeti Onayla ></div>
            </div>
        </div>

        <div id="app-fortune" class="app-modal">
            <div class="modal-header"><span>Falcƒ± Bacƒ±</span><button class="close-btn" onclick="closeApp('fortune')">Kapat</button></div>
            <div class="modal-content">
                <div class="crystal-ball-container" onclick="handleFortuneInteraction()">
                    <div class="crystal-ball" id="crystal-ball"></div>
                    <div class="crystal-stand"></div>
                </div>
                <div class="fortune-hint">üîÆ K√ºreye dokun veya telefonu salla...</div>
                <div class="fortune-text" id="fortune-text">Geleceƒüini g√∂rmek i√ßin<br>kristal k√ºreye odaklan...</div>
            </div>
        </div>

        <div id="app-quiz" class="app-modal">
            <div class="modal-header"><span>Beni Ne Kadar Tanƒ±yorsun?</span><button class="close-btn" onclick="closeApp('quiz')">Kapat</button></div>
            <div class="modal-content">
                <div class="quiz-container" id="quiz-container">
                    <div class="quiz-question" id="quiz-question">Soru Y√ºkleniyor...</div>
                    <div class="quiz-options" id="quiz-options"></div>
                </div>
                <div id="quiz-result">
                    <div class="score-circle" id="score-circle">0%</div>
                    <h2 id="result-title">Sonu√ß</h2>
                    <p id="result-msg">Mesaj</p>
                    <button class="quiz-btn" onclick="restartQuiz()" style="margin-top:20px;">Tekrar Oyna üîÑ</button>
                </div>
            </div>
        </div>

        <div id="app-maps" class="app-modal">
            <div class="modal-header"><span>Konum</span><button class="close-btn" onclick="closeApp('maps')">Kapat</button></div>
            <div class="modal-content" style="padding:20px;">
                <div class="map-container-fixed"><iframe class="map-frame" src="https://maps.google.com/maps?q=U≈üak+Atapark&t=&z=15&ie=UTF8&iwloc=&output=embed" frameborder="0" scrolling="no" marginheight="0" marginwidth="0"></iframe></div>
                <h3 style="margin-top:20px;">üìç Bizim Ba≈ülangƒ±cƒ±mƒ±z</h3><p style="color:#555;">U≈üak Atapark'ta hikayemiz ba≈üladƒ±...</p>
                <div style="background: linear-gradient(135deg, #FF9A9E 0%, #FECFEF 100%); padding:20px; border-radius:15px; text-align:center; color:white; margin-top:20px; margin-bottom:50px;"><h4>Birlikte Ge√ßen S√ºre</h4><div style="font-size:32px; font-weight:bold; margin:5px 0;" id="days-counter">0 G√ºn</div><div style="font-size:12px; opacity:0.8;">24.10.2022'den beri ‚ù§Ô∏è</div></div>
            </div>
        </div>

        <div id="app-music" class="app-modal">
            <div class="modal-header"><span>M√ºzik</span><button class="close-btn" onclick="closeApp('music')" style="color:white;">Kapat</button></div>
            <div class="music-bg"></div>
            <div class="music-ui">
                <div class="album-art"></div><div class="song-info"><div class="song-title">A≈ük Olsun</div><div class="song-artist">Sen ve Ben</div></div>
                <div class="progress-bar-container"><div class="progress-line"><div class="progress-fill"></div></div><div class="time-info"><span>1:24</span><span>3:45</span></div></div>
                <div class="controls"><div class="ctrl-btn">‚èÆÔ∏è</div><div class="ctrl-btn play-pause-btn" onclick="toggleMusic()" id="play-btn">‚ñ∂Ô∏è</div><div class="ctrl-btn">‚è≠Ô∏è</div></div>
                <div style="margin-top:20px; display:flex; gap:15px; justify-content:center; opacity:0.6;"><span>üîà</span><div style="width:150px; height:4px; background:#555; border-radius:2px; margin-top:10px;"><div style="width:70%; height:100%; background:white;"></div></div><span>üîä</span></div>
            </div>
        </div>

        <div id="app-messages" class="app-modal"><div class="modal-header"><button class="close-btn" onclick="closeApp('messages')">‚ùÆ Geri</button><span>Kocan ‚ù§Ô∏è</span><div style="width:30px"></div></div>
            <div class="modal-content">
                <div class="chat-wrapper">
                    <div class="chat-container" id="chat-list"></div>
                    <div class="msg-typing" id="typing-indicator"><span class="dot"></span><span class="dot"></span><span class="dot"></span></div>
                    <div class="chat-input-area"><input type="text" class="chat-input" id="chat-input" placeholder="iMessage"><button class="chat-send-btn" onclick="sendMessage()">‚¨ÜÔ∏è</button></div>
                </div>
            </div>
        </div>
        
        <div id="app-mail" class="app-modal">
            <div class="modal-header"><button class="close-btn" onclick="closeEmailRead()" id="mail-back-btn" style="opacity:0; pointer-events:none;">‚ùÆ Gelen</button><span id="mail-header-title">Gelen Kutusu</span><button class="close-btn" onclick="closeApp('mail')">Bitti</button></div>
            <div class="modal-content" style="background:white;">
                <div id="mail-list-view"><div style="padding:10px 20px; font-size:28px; font-weight:700;">Gelenler</div><div class="email-list" id="email-list"></div></div>
                <div id="mail-read-view"><h2 class="read-subject" id="read-subject">Konu</h2><div class="read-meta"><span>G√∂nderen: <b>Kocan ‚ù§Ô∏è</b></span><span id="read-time">Zaman</span></div><div class="read-body" id="read-body">ƒ∞√ßerik...</div><div class="read-actions" onclick="alert('üíå Mesajƒ±n iletildi: Seni √ßok seviyorum!')">‚Ü©Ô∏è Yanƒ±tla</div></div>
            </div>
        </div>
        
        <div id="app-phone" class="app-modal">
            <div class="modal-header"><span>Son Aramalar</span><button class="close-btn" onclick="closeApp('phone')">Kapat</button></div>
            <div class="modal-content"><div class="call-list" id="call-list"></div></div>
            <div id="calling-overlay"><img src="foto1.png" class="caller-img"><div class="call-status" id="call-status">Kocan ‚ù§Ô∏è aranƒ±yor...</div><div class="call-name">Kocan ‚ù§Ô∏è</div><div class="call-actions"><div class="action-btn">üîá</div><div class="action-btn">‚å®Ô∏è</div><div class="action-btn">üîä</div><div class="action-btn">‚ûï</div><div class="action-btn hangup-btn" onclick="endFakeCall()">üìû</div></div></div>
        </div>
        
        <div id="app-photos" class="app-modal">
            <div class="modal-header"><span>Alb√ºm</span><button class="close-btn" onclick="closeApp('photos')">Kapat</button></div>
            <div class="modal-content">
                <div class="photo-gallery">
                    <img src="foto1.png" class="gallery-photo photo-tall">
                    <img src="foto2.png" class="gallery-photo">
                    <img src="foto3.png" class="gallery-photo">
                    <img src="foto4.png" class="gallery-photo photo-wide">
                    <img src="foto5.png" class="gallery-photo">
                    <img src="foto6.png" class="gallery-photo photo-tall">
                </div>
                <p style="text-align:center; color:#888; margin:20px 0 10px; font-size:14px;">En g√ºzel anƒ±larƒ±mƒ±z... ‚ù§Ô∏è</p>
                <div class="surprise-box" onclick="revealSurprise(this)" style="margin: 0 20px 30px;">
                    <div class="initial-text">üéÅ S√ºrpriz ƒ∞√ßin Tƒ±kla</div>
                    <div class="surprise-content">Seni D√ºnyalar Kadar Seviyorum! ‚ù§Ô∏è<br>ƒ∞yi ki Benimsin! üéâ</div>
                </div>
            </div>
        </div>

        <div id="app-heart" class="app-modal">
            <button class="close-btn" onclick="closeApp('heart')" style="position:absolute; top:50px; right:20px; color:rgba(255,255,255,0.7); z-index:20;">‚úï</button>
            <div id="rain-container" style="position:absolute; top:0; left:0; width:100%; height:100%; pointer-events:none; z-index:1;"></div>
            <div class="click-counter">‚ù§Ô∏è <span id="heart-count">0</span></div>
            <div class="heart-wrapper"><div class="main-heart idle" id="interaction-heart">‚ù§Ô∏è</div></div>
            <div id="secret-layer"><h1 style="color:white;">SUMRO≈û≈û<br>A≈ûIƒûIM<br>SANA! ‚ù§Ô∏è</h1><div style="font-size:14px; margin-top:30px; opacity:0.8; color:white; border:1px solid white; padding:5px 15px; border-radius:20px;">(Kapatmak i√ßin tƒ±kla)</div></div>
            <div id="counter-layer"><div style="font-size:100px;">üíç</div><h1 style="color:white; margin-top:20px; padding:0 20px;">24'√ºnde seni sevdim,<br>daha da bƒ±rakmam!</h1><div style="font-size:14px; margin-top:30px; opacity:0.8; color:white; border:1px solid white; padding:5px 15px; border-radius:20px;" onclick="closeCounterLayer()">Seni Seviyorum</div></div>
        </div>

    </div>

    <script>
        function updateTime(){const n=new Date();document.getElementById('clock').innerText=String(n.getHours()).padStart(2,'0')+':'+String(n.getMinutes()).padStart(2,'0');document.getElementById('date').innerText=n.toLocaleDateString('tr-TR',{weekday:'long',day:'numeric',month:'long'});const s=new Date("2022-10-24");const d=Math.ceil(Math.abs(n-s)/(1000*60*60*24));document.getElementById('days-counter').innerText=d+" G√ºnd√ºr";}setInterval(updateTime,1000);updateTime();
        function unlockPhone(){document.getElementById('lock-screen').style.transform='translateY(-100%)';document.getElementById('home-screen').style.transform='translateY(0)';}
        function openApp(id){
            document.getElementById('app-'+id).classList.add('active');
            if(id==='messages')loadMessages();
            if(id==='mail')loadEmails();
            if(id==='phone')loadCalls();
            if(id==='heart')resetHeartApp();
            if(id==='quiz')restartQuiz();
        }
        function closeApp(id){document.getElementById('app-'+id).classList.remove('active');if(id==='heart')stopRain();}
        function toggleNoteMode(){const r=document.getElementById('note-read-mode');const w=document.getElementById('note-write-mode');if(r.style.display!=='none'){r.style.display='none';w.style.display='block';document.getElementById('note-title').innerText='Cevap Yaz';}else{r.style.display='block';w.style.display='none';document.getElementById('note-title').innerText='Mektup';}}
        function sendWhatsapp(){var m=document.getElementById('reply-text').value;if(m.trim()===""){alert("L√ºtfen √∂nce g√ºzel bir ≈üeyler yaz :)");return;}window.location.href="https://wa.me/905315581447?text="+encodeURIComponent(m);}
        var audio=document.getElementById('bg-music');function toggleMusic(){if(audio.paused){audio.play();document.getElementById('play-btn').innerText='‚è∏Ô∏è';}else{audio.pause();document.getElementById('play-btn').innerText='‚ñ∂Ô∏è';}}

        // KALP MANTIƒûI
        const heartEl = document.getElementById('interaction-heart');
        const secretLayer = document.getElementById('secret-layer');
        const counterLayer = document.getElementById('counter-layer');
        const countSpan = document.getElementById('heart-count');
        const rainContainer = document.getElementById('rain-container');
        let pressTimer, rainInterval, heartClickCount = 0, isPressing = false;

        function resetHeartApp() { heartEl.classList.remove('growing', 'tap'); heartEl.classList.add('idle'); secretLayer.classList.remove('visible'); counterLayer.classList.remove('visible'); stopRain(); heartClickCount = 0; countSpan.innerText = heartClickCount; isPressing = false; }
        function startAction(e) { e.preventDefault(); isPressing = true; startRain(); heartEl.classList.remove('idle'); heartEl.classList.add('tap'); pressTimer = setTimeout(() => { if(isPressing) { heartEl.classList.remove('tap'); heartEl.classList.add('growing'); setTimeout(() => { if(isPressing) { secretLayer.classList.add('visible'); heartEl.classList.remove('growing'); stopRain(); } }, 3000); } }, 250); }
        function endAction(e) { isPressing = false; clearTimeout(pressTimer); if (!heartEl.classList.contains('growing') && !secretLayer.classList.contains('visible')) { heartClickCount++; countSpan.innerText = heartClickCount; if(heartClickCount === 24) counterLayer.classList.add('visible'); } heartEl.classList.remove('growing', 'tap'); heartEl.classList.add('idle'); setTimeout(stopRain, 1000); }
        heartEl.addEventListener('mousedown', startAction); heartEl.addEventListener('touchstart', startAction); heartEl.addEventListener('mouseup', endAction); heartEl.addEventListener('touchend', endAction); heartEl.addEventListener('mouseleave', endAction);
        secretLayer.addEventListener('click', () => secretLayer.classList.remove('visible'));
        function closeCounterLayer() { counterLayer.classList.remove('visible'); }
        function startRain() { if(!rainInterval) rainInterval = setInterval(createFallingHeart, 100); }
        function stopRain() { clearInterval(rainInterval); rainInterval = null; }
        function createFallingHeart() { const h = document.createElement('div'); h.classList.add('falling-heart'); h.innerText = ['‚ù§Ô∏è', 'üíñ', 'üíï', 'üíó'][Math.floor(Math.random() * 4)]; h.style.left = Math.random() * 100 + '%'; h.style.fontSize = (Math.random() * 20 + 15) + 'px'; h.style.animationDuration = (Math.random() * 3 + 2) + 's'; rainContainer.appendChild(h); setTimeout(() => h.remove(), 5000); }

        // S√úRPRƒ∞Z KONFETƒ∞ PATLAMASI
        function revealSurprise(el) { if(el.classList.contains('revealed')) return; el.classList.add('revealed'); const initialText = el.querySelector('.initial-text'); const hiddenContent = el.querySelector('.surprise-content'); initialText.style.opacity = '0'; setTimeout(() => { initialText.style.display = 'none'; hiddenContent.style.display = 'block'; void hiddenContent.offsetWidth; hiddenContent.style.opacity = '1'; hiddenContent.style.transform = 'translateY(0)'; }, 300); const photoModal = document.getElementById('app-photos'); for(let i=0; i<150; i++) { const c = document.createElement('div'); c.classList.add('confetti'); c.innerText = ['‚ù§Ô∏è', '‚ú®', 'üéâ', 'üå∏', 'üíñ'][Math.floor(Math.random() * 5)]; c.style.left = (50 + (Math.random() - 0.5) * 20) + '%'; c.style.top = '70%'; c.style.fontSize = (Math.random() * 20 + 10) + 'px'; c.style.setProperty('--x', (Math.random() - 0.5) * 300 + 'px'); c.style.setProperty('--y', (Math.random() - 1) * 400 + 'px'); c.style.setProperty('--r', (Math.random() - 0.5) * 720 + 'deg'); photoModal.appendChild(c); setTimeout(() => c.remove(), 2000); } }

        // TELEFON
        let callTimer; function startFakeCall() { document.getElementById('calling-overlay').style.display = 'flex'; setTimeout(() => { let sec = 0; const status = document.getElementById('call-status'); callTimer = setInterval(() => { sec++; const min = Math.floor(sec / 60).toString().padStart(2,'0'); const s = (sec % 60).toString().padStart(2,'0'); status.innerText = `${min}:${s}`; }, 1000); }, 2000); }
        function endFakeCall() { document.getElementById('calling-overlay').style.display = 'none'; clearInterval(callTimer); document.getElementById('call-status').innerText = "Kocan ‚ù§Ô∏è aranƒ±yor..."; }

        // MESAJLA≈ûMA
        const replies = ["Seni √ßok seviyorum, her ≈üeyim ‚ù§Ô∏è", "√ñmr√ºm benim, iyi ki varsƒ±n üòç", "Kalbimin tek sahibisin ‚ù§Ô∏è", "Sen harikasƒ±n!", "Sana bayƒ±lƒ±yorum kadƒ±nƒ±m ‚ù§Ô∏è", "Mesajƒ±nƒ± g√∂r√ºnce g√ºn√ºm aydƒ±nlandƒ± ‚òÄÔ∏è", "Yanƒ±nda olmayƒ± √ßok isterdim ≈üu an.", "Seni d√º≈ü√ºnmeden edemiyorum...", "Benim g√ºzel sevgilim üíñ", "Seninle ge√ßen her an √ßok deƒüerli.", "D√ºnyanƒ±n en ≈üanslƒ± adamƒ±yƒ±m.", "G√∂zlerin aklƒ±ma geldi ≈üimdi... üòç", "Seni kocaman √∂p√ºyorum! üòò", "Ben de seni √ßok √∂zledim...", "Sen benim nefesimsin Sumru.", "Hayallerimin ba≈ürol√ºs√ºn ‚ù§Ô∏è"];
        let lastReplyIndex = null;
        function loadMessages(){ const c=document.getElementById('chat-list');if(c.innerHTML.trim()!=="")return; const msgs=[{t:"Merhaba g√ºzellik üëã",s:"in"},{t:"Ak≈üam Atapark'ta bulu≈üalƒ±m mƒ±?",s:"in"},{t:"Seni seviyorum Sumru!",s:"in"}]; msgs.forEach(m=>{c.innerHTML+=`<div class="msg-bubble ${m.s==='in'?'msg-received':'msg-sent'}">${m.t}</div>`;}); }
        function sendMessage() { const input = document.getElementById('chat-input'); const text = input.value; if(text.trim() === "") return; const container = document.getElementById('chat-list'); container.innerHTML += `<div class="msg-bubble msg-sent">${text}</div>`; input.value = ""; container.scrollTop = container.scrollHeight; setTimeout(() => { const typing = document.getElementById('typing-indicator'); typing.style.display = 'block'; container.scrollTop = container.scrollHeight; setTimeout(() => { typing.style.display = 'none'; let newIndex; do { newIndex = Math.floor(Math.random() * replies.length); } while (newIndex === lastReplyIndex && replies.length > 1); lastReplyIndex = newIndex; const randomReply = replies[newIndex]; container.innerHTML += `<div class="msg-bubble msg-received">${randomReply}</div>`; container.scrollTop = container.scrollHeight; }, 2000); }, 500); }

        // MAIL & CALLS
        const mailData = [{s:"S√ºrpriz Hazƒ±r! üéÅ", p:"Ak≈üama g√∂zlerini kapatmanƒ± isteyeceƒüim...", t:"14:20", b:"Canƒ±m Sevgilim,\n\nBu ak≈üam i√ßin k√º√ß√ºk ama √ßok seveceƒüini d√º≈ü√ºnd√ºƒü√ºm bir s√ºrpriz hazƒ±rladƒ±m. \n\nSeni √ßok seviyorum.\n-Kocan"},{s:"Sonsuzluƒüa...", p:"Seninle ba≈üladƒ±ƒüƒ±mƒ±z bu yolculukta...", t:"10:30", b:"Hayatƒ±mƒ±n anlamƒ±,\n\nSeninle her g√ºn yeni bir macera. Sonsuzluƒüa kadar el ele y√ºr√ºmek dileƒüiyle."},{s:"U√ßak Biletleri: Roma", p:"Hayallerimizi ger√ßekle≈ütirmeye bir adƒ±m daha...", t:"09:15", b:"A≈ükƒ±m,\n\nRoma biletlerine baktƒ±m..."},{s:"Tatil Planlarƒ± üèñÔ∏è", p:"Bu yaz nereye gitmek istersin?", t:"D√ºn", b:"Yaz yakla≈üƒ±yor g√ºzelim..."},{s:"Netflix ≈ûifresi", p:"Yeni ≈üifreyi unuttun mu yoksa? :)", t:"D√ºn", b:"≈ûifre: SumruCokGuzel123"},{s:"Sabah Kahvesi",p:"Uyandƒ±n mƒ± g√ºzellik?",t:"Paz",b:"G√ºnaydƒ±n a≈ükƒ±m, kahveni yaptƒ±m seni bekliyorum."},{s:"R√ºyamda Seni G√∂rd√ºm",p:"O kadar g√ºzeldin ki...",t:"Paz",b:"Hala etkisindeyim, r√ºyamda bile yanƒ±mdasƒ±n."},{s:"Fotoƒüraf Ar≈üivi",p:"Eski fotoƒüraflarƒ± buldum!",t:"Cum",b:"ƒ∞lk bulu≈ümamƒ±zdaki fotoƒürafƒ±mƒ±za bakƒ±p duruyorum."},{s:"Sadece Sen",p:"Aklƒ±mdan √ßƒ±kmƒ±yorsun.",t:"Per",b:"ƒ∞≈ü yerindeyim ama aklƒ±m fikrim sende."},{s:"Fatura Hatƒ±rlatmasƒ±",p:"≈ûaka ≈üaka, √∂p√ºc√ºk faturasƒ±!",t:"√áar",b:"Borcunuz: 1000 √∂p√ºc√ºk. Hemen tahsil edilmeli."}];
        function loadEmails(){ const e = document.getElementById('email-list'); if(e.innerHTML.trim()!=="") return; mailData.forEach((m, i) => { e.innerHTML += `<div class="email-item" onclick="openEmail(${i})"><div><b>Kocan ‚ù§Ô∏è</b><br>${m.s}<br><small style="color:#888;">${m.p}</small></div><small style="color:#888;">${m.t}</small></div>`; }); }
        function openEmail(index) { const m = mailData[index]; document.getElementById('read-subject').innerText = m.s; document.getElementById('read-time').innerText = m.t; document.getElementById('read-body').innerText = m.b; document.getElementById('mail-list-view').style.display = 'none'; document.getElementById('mail-read-view').style.display = 'block'; document.getElementById('mail-back-btn').style.opacity = '1'; document.getElementById('mail-back-btn').style.pointerEvents = 'auto'; }
        function closeEmailRead() { document.getElementById('mail-read-view').style.display = 'none'; document.getElementById('mail-list-view').style.display = 'block'; document.getElementById('mail-back-btn').style.opacity = '0'; document.getElementById('mail-back-btn').style.pointerEvents = 'none'; }
        
        function loadCalls(){const p=document.getElementById('call-list');if(p.innerHTML.trim()!=="")return;
            const calls=[{t:"missed",c:3,tm:"03:15"},{t:"in",c:0,tm:"00:42"},{t:"out",c:0,tm:"23:15"},{t:"missed",c:1,tm:"20:30"},{t:"in",c:0,tm:"18:45"},{t:"out",c:0,tm:"12:20"},{t:"missed",c:5,tm:"09:00"},{t:"in",c:0,tm:"08:30"},{t:"in",c:0,tm:"D√ºn"},{t:"out",c:0,tm:"D√ºn"},{t:"missed",c:2,tm:"D√ºn"}];
            calls.forEach(c=>{p.innerHTML+=`<div class="call-item" onclick="startFakeCall()"><div style="display:flex;align-items:center;gap:10px;"><span style="font-size:18px;">üìû</span><div><b style="color:${c.t==='missed'?'#FF3B30':'#000'}">Kocan ‚ù§Ô∏è</b><br><small style="color:#888">Mobil ‚Ä¢ ${c.t==='missed'?'Cevapsƒ±z ('+c.c+')':(c.t==='in'?'Gelen':'Giden')}</small></div></div><small style="color:#888">${c.tm}</small></div>`;});}

        // A≈ûK DURUMU MANTIƒûI
        const sunIcon = document.getElementById('sun-icon');
        const loveExplosion = document.getElementById('love-explosion-overlay');
        let sunTimer;

        // Tƒ±klama (Basƒ±lƒ± tutma) olaylarƒ±
        sunIcon.addEventListener('mousedown', startSunPress);
        sunIcon.addEventListener('touchstart', startSunPress);
        sunIcon.addEventListener('mouseup', endSunPress);
        sunIcon.addEventListener('touchend', endSunPress);
        sunIcon.addEventListener('mouseleave', endSunPress);

        function startSunPress(e) {
            e.preventDefault();
            sunIcon.classList.add('growing'); // B√ºy√ºme animasyonu
            
            // 2 saniye sonra patlama
            sunTimer = setTimeout(() => {
                loveExplosion.classList.add('visible');
                sunIcon.classList.remove('growing');
                // 3 saniye sonra ekranƒ± temizle
                setTimeout(() => {
                    loveExplosion.classList.remove('visible');
                }, 3000);
            }, 2000);
        }

        function endSunPress() {
            clearTimeout(sunTimer); // S√ºre dolmadan bƒ±rakƒ±rsa iptal
            sunIcon.classList.remove('growing');
        }

        // A≈ûK √áARKI MANTIƒûI
        const wheel = document.getElementById('wheel');
        const resOverlay = document.getElementById('wheel-result-overlay');
        const resIcon = document.getElementById('res-icon');
        const resText = document.getElementById('res-text');
        const spinBtn = document.getElementById('spin-btn');
        const resBtn = document.getElementById('res-btn');
        const wheelModal = document.getElementById('app-wheel');
        let currentDeg = 0;
        let isSpinning = false;

        function spinWheel() {
            if(isSpinning) return; spinBtn.disabled = true; isSpinning = true;
            const randomSpins = 5; 
            const randomDegree = Math.floor(Math.random() * 360);
            const totalDegree = (randomSpins * 360) + randomDegree;
            currentDeg += totalDegree; wheel.style.transform = `rotate(${currentDeg}deg)`;

            setTimeout(() => {
                const actualDeg = currentDeg % 360;
                // Pointer'ƒ±n altƒ±ndaki a√ßƒ±yƒ± bul (0-359 arasƒ±)
                const angleUnderPointer = (360 - actualDeg) % 360;
                // 36 derecelik dilimlere b√∂l
                const finalSegment = Math.floor(angleUnderPointer / 36);

                const options = [
                    {i:"üíÜ‚Äç‚ôÇÔ∏è", t:"Masaj Yap"}, {i:"üìú", t:"Bana ≈ûiir Oku"}, {i:"üé¨", t:"Film Se√ß"}, 
                    {i:"üßº", t:"Bula≈üƒ±klar Sende!"}, {i:"‚òï", t:"Kahve Ismarla"}, {i:"üíã", t:"Kocaman √ñp"},
                    {i:"üçù", t:"Romantik Yemek"}, {i:"ü´Ç", t:"Sƒ±msƒ±kƒ± Sarƒ±l"}, 
                    {i:"ü¶∂", t:"10 Dk Ayak Masajƒ±"}, {i:"‚ù§Ô∏è", t:"Seni Seviyorum De"}
                ];
                resIcon.innerText = options[finalSegment].i; resText.innerText = options[finalSegment].t;
                
                // --- RASTGELE CEVAPLAR ---
                const buttonTexts = [
                    "Tamam A≈üko üíñ", "Hemen Yapƒ±yorum! üèÉ‚Äç‚ôÇÔ∏è", "Emrin Olur Prenses üëë", 
                    "Anla≈ütƒ±k! ü§ù", "Zevkle! üòç", "≈ûansƒ±ma K√ºs! üòÇ", "Hadi Bakalƒ±m! üî•",
                    "Sen ƒ∞ste Yeter üíò", "Mesaj Alƒ±ndƒ± üíå", "Uuu Beybi! üòè"
                ];
                resBtn.innerText = buttonTexts[Math.floor(Math.random() * buttonTexts.length)];

                resOverlay.classList.add('visible');

                for(let i=0; i<100; i++) { 
                    const c = document.createElement('div'); c.classList.add('confetti'); 
                    c.innerText = ['‚ù§Ô∏è', '‚ú®', 'üéâ'][Math.floor(Math.random() * 3)]; 
                    c.style.left = '50%'; c.style.top = '50%';
                    c.style.fontSize = (Math.random() * 20 + 10) + 'px'; 
                    c.style.setProperty('--x', (Math.random() - 0.5) * 500 + 'px'); 
                    c.style.setProperty('--y', (Math.random() - 0.5) * 500 + 'px'); 
                    c.style.setProperty('--r', (Math.random() * 360) + 'deg'); 
                    wheelModal.appendChild(c); setTimeout(() => c.remove(), 2000); 
                }
            }, 4000);
        }
        function closeResultPopup() { resOverlay.classList.remove('visible'); spinBtn.disabled = false; isSpinning = false; }

        // AYARLAR ETKƒ∞LE≈ûƒ∞Mƒ∞ (D√úZELTƒ∞LDƒ∞: U√áAK MODU A√á KAPA)
        function toggleAirplaneMode() {
            const sw = document.getElementById('airplane-switch');
            sw.checked = !sw.checked; // Checkbox durumunu deƒüi≈ütir
            
            if(sw.checked) {
                alert("‚úàÔ∏è U√ßu≈üa ge√ßildi! ≈ûu an yerle irtibat kesildi, sadece seninle havadayƒ±z a≈ükƒ±m.");
            } else {
                alert("üåç Yere ini≈ü yapƒ±ldƒ± ama aklƒ±m hala bulutlarƒ±n √ºzerinde...");
            }
        }

        // C√úZDAN KUPON MANTIƒûI
        const coupons = [
            {t:"Masaj Keyfi", d:"Bu kupon 30 dakika kesintisiz, rahatlatƒ±cƒ± bir masaj hakkƒ± verir. Yaƒülar Kocandan!", c:"linear-gradient(135deg, #FF9A9E 0%, #FECFEF 100%)", i:"üíÜ‚Äç‚ôÄÔ∏è"},
            {t:"Haklƒ±sƒ±n Kartƒ±", d:"Herhangi bir tartƒ±≈ümada anƒ±nda haklƒ± √ßƒ±kma garantisi. Sorgusuz sualsiz ge√ßerlidir.", c:"linear-gradient(135deg, #a18cd1 0%, #fbc2eb 100%)", i:"‚úÖ"},
            {t:"Yemek Ismarla", d:"Bug√ºn mutfak kapalƒ±! ƒ∞stediƒüin restoranda, istediƒüin yemeƒüi ƒ±smarlƒ±yorum.", c:"linear-gradient(135deg, #8fd3f4 0%, #84fab0 100%)", i:"üçΩÔ∏è"},
            {t:"Sƒ±nƒ±rsƒ±z √ñp√ºc√ºk", d:"Bu kuponun limiti yoktur. ƒ∞stenildiƒüi zaman, istenildiƒüi kadar kullanƒ±labilir.", c:"linear-gradient(135deg, #fccb90 0%, #d57eeb 100%)", i:"üíã"},
            {t:"Yatakta Kahvaltƒ±", d:"Pazar sabahƒ± uyanmak yok! Kocan kahvaltƒ±yƒ± yataƒüƒ±na getirecek.", c:"linear-gradient(135deg, #e0c3fc 0%, #8ec5fc 100%)", i:"ü•û"},
            {t:"Sinema Gecesi", d:"Film se√ßimi, mƒ±sƒ±r patlatma ve i√ßecek servisi tamamen bana ait.", c:"linear-gradient(135deg, #f093fb 0%, #f5576c 100%)", i:"üçø"},
            {t:"Teknoloji Diyeti", d:"Telefonlarƒ± kapatƒ±yoruz. 1 saat boyunca sadece birbirimize odaklanƒ±yoruz.", c:"linear-gradient(135deg, #4facfe 0%, #00f2fe 100%)", i:"üìµ"},
            {t:"S√ºrpriz Randevu", d:"Nereye gideceƒüimizi sorma. Hazƒ±rlan ve bana g√ºven.", c:"linear-gradient(135deg, #43e97b 0%, #38f9d7 100%)", i:"ü•Ç"},
            {t:"Alƒ±≈üveri≈ü G√ºn√º", d:"Bug√ºn limit yok (≈üaka ≈üaka var ama sana feda olsun). Kartƒ±m emrine amade!", c:"linear-gradient(135deg, #ff9a9e 0%, #fecfef 100%)", i:"üõçÔ∏è"},
            {t:"Sessizlik Hakkƒ±", d:"Bazen sadece susup sarƒ±lmak istersin. Bu kupon o anlar i√ßin.", c:"linear-gradient(135deg, #a18cd1 0%, #fbc2eb 100%)", i:"ü§´"},
            {t:"Oyun Gecesi", d:"ƒ∞stediƒüin oyunu oynuyoruz! Kazanmana izin verebilirim... belki.", c:"linear-gradient(135deg, #8fd3f4 0%, #84fab0 100%)", i:"üéÆ"},
            {t:"√ñzel ≈ûof√∂rl√ºk", d:"Araba bende. Nereye gitmek istersen ≈üof√∂r√ºn hazƒ±r!", c:"linear-gradient(135deg, #fccb90 0%, #d57eeb 100%)", i:"üöó"}
        ];

        let currentCouponIndex = -1;
        function openCoupon(index) {
            currentCouponIndex = index;
            const c = coupons[index];
            document.getElementById('detail-title').innerText = c.t;
            document.getElementById('detail-desc').innerText = c.d;
            document.getElementById('detail-bg').innerText = c.i;
            document.querySelector('.coupon-detail-card .detail-header').style.background = c.c;
            document.getElementById('coupon-detail-overlay').classList.add('visible');
        }

        function closeCoupon() {
            document.getElementById('coupon-detail-overlay').classList.remove('visible');
        }

        function useCoupon() {
            if(currentCouponIndex === -1) return;
            const c = coupons[currentCouponIndex];
            const message = `A≈ükƒ±m! ‚ù§Ô∏è ≈ûu kuponumu kullanmak istiyorum: \n\nüé´ *${c.t}*\nüìù ${c.d}`;
            
            alert(`üéâ Harika se√ßim a≈ükƒ±m! "${c.t}" kuponu i≈üleme alƒ±ndƒ±.\n\nKocan hazƒ±rlanmaya ba≈ülasƒ±n... üòâ`);
            window.location.href = `https://api.whatsapp.com/send?phone=905315581447&text=${encodeURIComponent(message)}`;
            
            closeCoupon();
        }

        // --- A≈ûK MUTFAƒûI MANTIƒûI ---
        const foodMenu = {
            1: {n: "Kocan Burger", p: "1 √ñp√ºc√ºk"},
            2: {n: "Romantik Makarna", p: "Sƒ±msƒ±kƒ± Sarƒ±lma"},
            3: {n: "A≈ük Krebi", p: "G√ºl√ºmseme"},
            4: {n: "Kocan Kahvesi", p: "5 Dk Masaj"},
            6: {n: "√áikolata Krizi", p: "1 √ñp√ºc√ºk"},
            7: {n: "√áiƒük√∂fte D√ºr√ºm", p: "Ayran Senden"},
            8: {n: "Hatay D√∂ner", p: "Bir Isƒ±rƒ±k"},
            9: {n: "√áƒ±tƒ±r Lahmacun", p: "Salata Benden"},
            10: {n: "Sƒ±cak Sufle", p: "Kahve Yanƒ±na"}
        };
        const foodCart = {}; // Sepet verisi

        function updateFood(id, change) {
            if (!foodCart[id]) foodCart[id] = 0;
            foodCart[id] += change;
            if (foodCart[id] < 0) foodCart[id] = 0;

            // UI G√ºncelleme (Sayƒ± ve Buton G√∂r√ºn√ºrl√ºƒü√º)
            const qtySpan = document.getElementById('qty-' + id);
            const itemDiv = document.getElementById('item-' + id);
            
            qtySpan.innerText = foodCart[id];

            if (foodCart[id] > 0) {
                itemDiv.classList.add('has-item'); // Eksi butonu ve sayƒ±yƒ± g√∂ster
            } else {
                itemDiv.classList.remove('has-item'); // Eksi butonu ve sayƒ±yƒ± gizle
            }

            checkCartBar();
        }

        function checkCartBar() {
            const bar = document.getElementById('cart-bar');
            let totalItems = 0;

            for (const value of Object.values(foodCart)) {
                totalItems += value;
            }

            if (totalItems > 0) {
                bar.classList.add('active');
                document.getElementById('cart-total-txt').innerText = "Bolca A≈ük & Lezzet";
            } else {
                bar.classList.remove('active');
            }
        }

        function sendFoodOrder() {
            let message = "A≈ükƒ±m acƒ±ktƒ±m! üòã\nƒ∞≈üte sipari≈ülerim:\n\n";
            let hasItem = false;

            for (const [key, value] of Object.entries(foodCart)) {
                if (value > 0) {
                    message += `‚ñ™Ô∏è ${value}x ${foodMenu[key].n}\n`;
                    hasItem = true;
                }
            }
            message += "\n√ñdeme Y√∂ntemi: Kapƒ±da √ñp√ºc√ºk üíã\nHemen Bekliyorum!";

            if(hasItem) {
                alert("Sipari≈üin Alƒ±ndƒ± Prenses! üöÄ\n\nKocan hemen hazƒ±rlƒ±klara ba≈ülƒ±yor... Whatsapp'a y√∂nlendiriliyorsun.");
                // WhatsApp'a G√∂nder
                window.location.href = `https://api.whatsapp.com/send?phone=905315581447&text=${encodeURIComponent(message)}`;
            }
        }

        // --- FALCI MANTIƒûI ---
        const fortuneBall = document.getElementById('crystal-ball');
        const fortuneText = document.getElementById('fortune-text');
        let isFortuneTelling = false;

        const fortunes = [
            "3 vakte kadar sana bir s√ºrpriz g√∂r√ºn√ºyor... üéÅ",
            "Geleceƒüinde √ßok yakƒ±≈üƒ±klƒ± bir adam var... Aa o benim! üòé",
            "Bu ak≈üam bula≈üƒ±klar kocana kƒ±smet g√∂r√ºn√ºyor. üçΩÔ∏è",
            "Yolun a√ßƒ±k, sonu nikah tazeleme. üíç",
            "A≈ük hayatƒ±n alev alev yanƒ±yor! üî•",
            "Bug√ºn ≈üansƒ±n √ßok y√ºksek, hemen bir dilek tut! ‚ú®",
            "Falƒ±nda kocaman bir sarƒ±lma √ßƒ±ktƒ±. ü§ó",
            "G√∂zlerinde bir ƒ±≈üƒ±ltƒ± var, sebebi a≈ük olsa gerek. ‚ù§Ô∏è",
            "Kƒ±smetinde Atapark'ta romantik bir y√ºr√ºy√º≈ü var. üå≥",
            "Kocan seni d√º≈ü√ºn√ºyor, kulaƒüƒ±n √ßƒ±nlamadƒ± mƒ±? üëÇ",
            "Bug√ºn sana bir kahve borcu var. ‚òï",
            "Telefonun √ßalacak, arayan kalbinin sahibi. üìû",
            "R√ºyanda beni g√∂receksin, ka√ßƒ±≈ü yok! üò¥",
            "Bu hafta sonu ayaklarƒ±n yerden kesilecek. ‚úàÔ∏è",
            "≈ûu an sarƒ±lmaya ihtiyacƒ±n var, sinyaller alƒ±ndƒ±. üì°",
            "G√∂nl√ºn√ºn efendisi seni √ßok √∂zlemi≈ü. ü•∞",
            "Birazdan tatlƒ± bir mesaj alabilirsin. üíå",
            "Kalbindeki ki≈üi seni d√º≈ü√ºn√ºp g√ºl√ºms√ºyor. üòä",
            "Yakƒ±nda minik bir hediye kapƒ±nƒ± √ßalabilir. üéÅ"
        ];

        function handleFortuneInteraction() {
            if (typeof DeviceMotionEvent.requestPermission === 'function' && localStorage.getItem('motionPermission') !== 'granted') {
                DeviceMotionEvent.requestPermission()
                    .then(permissionState => {
                        if (permissionState === 'granted') {
                            localStorage.setItem('motionPermission', 'granted');
                            tellFortune();
                        }
                    })
                    .catch(console.error);
            } else {
                tellFortune();
            }
        }

        function tellFortune() {
            if(isFortuneTelling) return;
            isFortuneTelling = true;
            fortuneBall.classList.add('shaking');
            fortuneText.classList.remove('visible');
            setTimeout(() => {
                fortuneBall.classList.remove('shaking');
                const randomFortune = fortunes[Math.floor(Math.random() * fortunes.length)];
                fortuneText.innerHTML = randomFortune;
                fortuneText.classList.add('visible');
                isFortuneTelling = false;
            }, 2000);
        }

        if (window.DeviceMotionEvent) {
            window.addEventListener('devicemotion', (event) => {
                if (!isFortuneTelling && document.getElementById('app-fortune').classList.contains('active')) {
                    const acc = event.accelerationIncludingGravity;
                    if (acc && (Math.abs(acc.x) > 15 || Math.abs(acc.y) > 15)) {
                        tellFortune();
                    }
                }
            });
        }

        // --- QUIZ (BENƒ∞ TANI) MANTIƒûI ---
        const quizData = [
            {q: "Hangi rengi seviyorum? üé®", a: "Mavi", o: ["Kƒ±rmƒ±zƒ±", "Siyah"]},
            {q: "Hangi saatte sevgili olduk? ‚è∞", a: "21:35", o: ["20:00", "19:05"]},
            {q: "Ben en √ßok neyi severim? ‚ù§Ô∏è", a: "Karƒ±m", o: ["Araba", "Para"]},
            {q: "En sevdiƒüim yemek? üçΩÔ∏è", a: "D√∂ner", o: ["Pizza", "Hamburger"]},
            {q: "En sevdiƒüim tatlƒ±? üç∞", a: "Minik sumroslar", o: ["Baklava", "S√ºtla√ß"]},
            {q: "Okulda ki en y√ºksek notum? üíØ", a: "100", o: ["85", "90"]},
            {q: "En sevdiƒüim koku? üëÉ", a: "Boynun", o: ["Parf√ºm", "√ái√ßek"]},
            {q: "En sevdiƒüim oyun? üéÆ", a: "Minecraft", o: ["GTA V", "Valorant"]},
            {q: "En korktuƒüum ≈üey? üò±", a: "Karƒ±mm", o: ["√ñr√ºmcek", "Y√ºkseklik"]},
            {q: "En sevdiƒüim manzara? üåÖ", a: "Sen ve Deniz", o: ["Daƒü Evi", "Orman"]}
        ];

        let currentQuestion = 0;
        let score = 0;

        function shuffleArray(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
        }

        function restartQuiz() {
            currentQuestion = 0;
            score = 0;
            document.getElementById('quiz-container').style.display = 'block';
            document.getElementById('quiz-result').style.display = 'none';
            loadQuestion();
        }

        function loadQuestion() {
            if (currentQuestion >= quizData.length) {
                showQuizResult();
                return;
            }

            const data = quizData[currentQuestion];
            document.getElementById('quiz-question').innerText = data.q;
            
            // ≈ûƒ±klarƒ± karƒ±≈ütƒ±r
            let options = [data.a, ...data.o];
            shuffleArray(options);

            const optionsContainer = document.getElementById('quiz-options');
            optionsContainer.innerHTML = '';

            options.forEach(opt => {
                const btn = document.createElement('button');
                btn.classList.add('quiz-btn');
                btn.innerText = opt;
                btn.onclick = () => checkAnswer(btn, opt, data.a);
                optionsContainer.appendChild(btn);
            });
        }

        function checkAnswer(btn, selected, correct) {
            // Butonlarƒ± devre dƒ±≈üƒ± bƒ±rak
            const btns = document.querySelectorAll('.quiz-btn');
            btns.forEach(b => b.disabled = true);

            if (selected === correct) {
                btn.classList.add('correct');
                score++;
                // Konfeti patlat
                const modal = document.getElementById('app-quiz');
                for(let i=0; i<30; i++) { 
                    const c = document.createElement('div'); c.classList.add('confetti'); 
                    c.innerText = ['üéâ', '‚ú®', 'üëè'][Math.floor(Math.random() * 3)];
                    c.style.left = '50%'; c.style.top = '50%';
                    c.style.setProperty('--x', (Math.random() - 0.5) * 500 + 'px'); 
                    c.style.setProperty('--y', (Math.random() - 0.5) * 500 + 'px'); 
                    c.style.setProperty('--r', (Math.random() * 360) + 'deg'); 
                    modal.appendChild(c); setTimeout(() => c.remove(), 2000); 
                }
            } else {
                btn.classList.add('wrong');
                // Doƒüruyu g√∂ster
                btns.forEach(b => {
                    if (b.innerText === correct) b.classList.add('correct');
                });
                // Titre≈üim (mobil i√ßin)
                if (navigator.vibrate) navigator.vibrate(200);
            }

            setTimeout(() => {
                currentQuestion++;
                loadQuestion();
            }, 1500);
        }

        function showQuizResult() {
            document.getElementById('quiz-container').style.display = 'none';
            document.getElementById('quiz-result').style.display = 'flex';
            
            const percentage = Math.round((score / quizData.length) * 100);
            document.getElementById('score-circle').innerText = `%${percentage}`;
            
            let title, msg;
            if (percentage === 100) { title = "M√úKEMMEL! üèÜ"; msg = "Sen benim Ruh E≈üimsin! Beni benden iyi tanƒ±yorsun. ‚ù§Ô∏è"; }
            else if (percentage >= 80) { title = "HARƒ∞KA! üëè"; msg = "√áok iyi! Beni ger√ßekten seviyorsun ve √∂nemsiyorsun."; }
            else if (percentage >= 50) { title = "ƒ∞DARE EDER ü§î"; msg = "Fena deƒüil ama biraz daha √ßalƒ±≈üman lazƒ±m a≈ükƒ±m."; }
            else { title = "EYVAH! üò±"; msg = "Bu ak≈üam trip yemeye hazƒ±r ol! Nasƒ±l bilemezsin?"; }
            
            document.getElementById('result-title').innerText = title;
            document.getElementById('result-msg').innerText = msg;
        }

    </script>
</body>
</html>